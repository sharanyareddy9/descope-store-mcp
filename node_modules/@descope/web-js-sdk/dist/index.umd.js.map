{"version":3,"file":"index.umd.js","sources":["../../../../node_modules/.pnpm/@rollup+plugin-typescript@11.1.6_rollup@4.22.4_tslib@2.8.1_typescript@5.4.5/node_modules/tslib/tslib.es6.js","../../../../node_modules/.pnpm/jwt-decode@4.0.0/node_modules/jwt-decode/build/esm/index.js","../src/enhancers/helpers/index.ts","../../core-js-sdk/dist/index.esm.js","../src/enhancers/helpers/logger.ts","../src/constants.ts","../src/enhancers/withAutoRefresh/helpers.ts","../../../../node_modules/.pnpm/js-cookie@3.0.5/node_modules/js-cookie/dist/js.cookie.mjs","../src/enhancers/withPersistTokens/constants.ts","../src/enhancers/withPersistTokens/helpers.ts","../src/enhancers/withFingerprint/constants.ts","../../../../node_modules/.pnpm/@fingerprintjs+fingerprintjs-pro@3.11.6/node_modules/@fingerprintjs/fingerprintjs-pro/dist/fp.esm.min.js","../src/enhancers/withFingerprint/helpers.ts","../src/enhancers/withFingerprint/index.ts","../src/enhancers/withFlowNonce/constants.ts","../src/enhancers/withFlowNonce/helpers.ts","../src/enhancers/withLastLoggedInUser/constants.ts","../src/enhancers/withLastLoggedInUser/helpers.ts","../src/enhancers/withLastLoggedInUser/index.ts","../src/enhancers/withNotifications/helpers.ts","../src/enhancers/withNotifications/index.ts","../src/enhancers/withPersistTokens/index.ts","../src/sdk/webauthn.ts","../src/apiPaths.ts","../src/sdk/fedcm.ts","../src/sdk/flow.ts","../src/sdk/oidc/index.ts","../src/sdk/oidc/helpers.ts","../src/index.ts","../src/enhancers/helpers/compose.ts","../src/enhancers/withAutoRefresh/index.ts","../src/enhancers/withAnalytics.ts","../src/enhancers/withFlowNonce/index.ts","../src/sdk/index.ts","../src/index.umd.ts"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n","export class InvalidTokenError extends Error {\n}\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(atob(str).replace(/(.)/g, (m, p) => {\n        let code = p.charCodeAt(0).toString(16).toUpperCase();\n        if (code.length < 2) {\n            code = \"0\" + code;\n        }\n        return \"%\" + code;\n    }));\n}\nfunction base64UrlDecode(str) {\n    let output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw new Error(\"base64 string is not of the correct length\");\n    }\n    try {\n        return b64DecodeUnicode(output);\n    }\n    catch (err) {\n        return atob(output);\n    }\n}\nexport function jwtDecode(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified: must be a string\");\n    }\n    options || (options = {});\n    const pos = options.header === true ? 0 : 1;\n    const part = token.split(\".\")[pos];\n    if (typeof part !== \"string\") {\n        throw new InvalidTokenError(`Invalid token specified: missing part #${pos + 1}`);\n    }\n    let decoded;\n    try {\n        decoded = base64UrlDecode(part);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${pos + 1} (${e.message})`);\n    }\n    try {\n        return JSON.parse(decoded);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid json for part #${pos + 1} (${e.message})`);\n    }\n}\n","import { JWTResponse, UserResponse } from '@descope/core-js-sdk';\nimport { CoreSdkConfig, WebJWTResponse, WebSigninResponse } from '../../types';\nimport { jwtDecode, JwtPayload } from 'jwt-decode';\n\nconst getExpirationFromToken = (token: string) => {\n  try {\n    const claims = jwtDecode<JwtPayload>(token);\n    return claims.exp;\n  } catch (e) {\n    return null;\n  }\n};\n\nconst oidcRefreshTokenExpiration = (response: WebSigninResponse) => {\n  const { refresh_expire_in, refresh_token } = response;\n  if (refresh_expire_in) {\n    return Math.floor(Date.now() / 1000) + refresh_expire_in;\n  }\n  return getExpirationFromToken(refresh_token);\n};\n\nconst oidcAccessTokenExpiration = (response: WebSigninResponse) => {\n  // oidc-client-ts may return the expiration time in\n  // - the expires_at (timestamp in seconds)\n  // - the expires_in (ttl in seconds)\n  // - we also fallback to the token itself\n  const { expires_in, expires_at, access_token } = response;\n  if (expires_at) {\n    return expires_at;\n  }\n  if (expires_in) {\n    // get expiration time from the expires_in in seconds\n    return Math.floor(Date.now() / 1000) + expires_in;\n  }\n  if (access_token) {\n    // get expiration time from the token itself\n    return getExpirationFromToken(access_token);\n  }\n  return undefined;\n};\n\nconst normalizeWebJWTResponseToJWTResponse = (\n  response: WebSigninResponse,\n): WebJWTResponse => {\n  const { access_token, id_token, refresh_token, refresh_expire_in, ...rest } =\n    response;\n  return {\n    sessionJwt: response.sessionJwt || access_token,\n    idToken: id_token,\n    refreshJwt: response.refreshJwt || refresh_token,\n    sessionExpiration:\n      response.sessionExpiration || oidcAccessTokenExpiration(response),\n    cookieExpiration:\n      response.cookieExpiration ||\n      (oidcRefreshTokenExpiration(response) as number),\n    ...rest,\n  };\n};\n\n/**\n * Add hooks to an existing core-sdk config\n */\nexport const addHooks = <Config extends CoreSdkConfig>(\n  config: Config,\n  hooks: Config['hooks'],\n): Config => {\n  ['beforeRequest', 'afterRequest'].reduce(\n    (acc, key) => {\n      acc[key] = []\n        .concat(config.hooks?.[key] || [])\n        .concat(hooks?.[key] || []);\n\n      return acc;\n    },\n    (config.hooks ??= {}),\n  );\n\n  return config;\n};\n\nexport { compose } from './compose';\n\n/**\n * Extract auth info (JWT response) from fetch response\n * We assume that the auth info is under a \"authInfo\" attribute (flow response)\n * Or the body itself (other auth methods response)\n */\nexport const getAuthInfoFromResponse = async (\n  res: Response,\n): Promise<Partial<WebJWTResponse>> => {\n  if (!res?.ok) return {};\n  const body = await res?.clone().json();\n  const authInfo = body?.authInfo || body || ({} as Partial<WebJWTResponse>);\n  return normalizeWebJWTResponseToJWTResponse(authInfo);\n};\n\n/**\n * Extract user from fetch response\n * User my exist under \"user\" attribute (auth methods response)\n * Or the body itself (when calling \"me\")\n */\nexport const getUserFromResponse = async (\n  res: Response,\n): Promise<UserResponse> | undefined => {\n  const authInfo = await getAuthInfoFromResponse(res);\n\n  return (\n    authInfo?.user ||\n    (authInfo?.hasOwnProperty('userId')\n      ? (authInfo as UserResponse)\n      : undefined)\n  );\n};\n\n// This window flag is set by mobile frameworks\nexport const isDescopeBridge = () =>\n  typeof window !== 'undefined' && !!window['descopeBridge'];\n\nexport const isLocalStorage = typeof localStorage !== 'undefined';\n\nexport const setLocalStorage = (key: string, value: string) =>\n  isLocalStorage && localStorage?.setItem(key, value);\nexport const getLocalStorage = (key: string) =>\n  isLocalStorage && localStorage?.getItem(key);\nexport const removeLocalStorage = (key: string) =>\n  isLocalStorage && localStorage?.removeItem(key);\n","import{jwtDecode as e}from\"jwt-decode\";var t={accessKey:{exchange:\"/v1/auth/accesskey/exchange\"},otp:{verify:\"/v1/auth/otp/verify\",signIn:\"/v1/auth/otp/signin\",signUp:\"/v1/auth/otp/signup\",update:{email:\"/v1/auth/otp/update/email\",phone:\"/v1/auth/otp/update/phone\"},signUpOrIn:\"/v1/auth/otp/signup-in\"},magicLink:{verify:\"/v1/auth/magiclink/verify\",signIn:\"/v1/auth/magiclink/signin\",signUp:\"/v1/auth/magiclink/signup\",update:{email:\"/v1/auth/magiclink/update/email\",phone:\"/v1/auth/magiclink/update/phone\"},signUpOrIn:\"/v1/auth/magiclink/signup-in\"},enchantedLink:{verify:\"/v1/auth/enchantedlink/verify\",signIn:\"/v1/auth/enchantedlink/signin\",signUp:\"/v1/auth/enchantedlink/signup\",session:\"/v1/auth/enchantedlink/pending-session\",update:{email:\"/v1/auth/enchantedlink/update/email\"},signUpOrIn:\"/v1/auth/enchantedlink/signup-in\"},oauth:{start:\"/v1/auth/oauth/authorize\",exchange:\"/v1/auth/oauth/exchange\",startNative:\"v1/auth/oauth/native/start\",finishNative:\"v1/auth/oauth/native/finish\",oneTap:{getOneTapClientId:\"/v1/auth/onetap/clientid/{provider}\",exchangeOneTapIDToken:\"/v1/auth/onetap/idtoken/exchange\",verifyOneTapIDToken:\"/v1/auth/onetap/idtoken/verify\"}},outbound:{connect:\"/v1/outbound/oauth/connect\"},saml:{start:\"/v1/auth/saml/authorize\",exchange:\"/v1/auth/saml/exchange\"},totp:{verify:\"/v1/auth/totp/verify\",signUp:\"/v1/auth/totp/signup\",update:\"/v1/auth/totp/update\"},notp:{signIn:\"/v1/auth/notp/whatsapp/signin\",signUp:\"/v1/auth/notp/whatsapp/signup\",signUpOrIn:\"/v1/auth/notp/whatsapp/signup-in\",session:\"/v1/auth/notp/pending-session\"},webauthn:{signUp:{start:\"/v1/auth/webauthn/signup/start\",finish:\"/v1/auth/webauthn/signup/finish\"},signIn:{start:\"/v1/auth/webauthn/signin/start\",finish:\"/v1/auth/webauthn/signin/finish\"},signUpOrIn:{start:\"/v1/auth/webauthn/signup-in/start\"},update:{start:\"v1/auth/webauthn/update/start\",finish:\"/v1/auth/webauthn/update/finish\"}},password:{signUp:\"/v1/auth/password/signup\",signIn:\"/v1/auth/password/signin\",sendReset:\"/v1/auth/password/reset\",update:\"/v1/auth/password/update\",replace:\"/v1/auth/password/replace\",policy:\"/v1/auth/password/policy\"},refresh:\"/v1/auth/refresh\",tryRefresh:\"/v1/auth/try-refresh\",selectTenant:\"/v1/auth/tenant/select\",logout:\"/v1/auth/logout\",logoutAll:\"/v1/auth/logoutall\",me:\"/v1/auth/me\",myTenants:\"/v1/auth/me/tenants\",history:\"/v1/auth/me/history\",flow:{start:\"/v1/flow/start\",next:\"/v1/flow/next\"}};const n=\"<region>\",o=`https://api.${n}descope.com`,s=1e3,i=6e5,a=\"dct\",r=()=>{const e={};return{headers(t){const n=\"function\"==typeof t.entries?Object.fromEntries(t.entries()):t;return e.Headers=JSON.stringify(n),this},body(t){return e.Body=t,this},url(t){return e.Url=t.toString(),this},method(t){return e.Method=t,this},title(t){return e.Title=t,this},status(t){return e.Status=t,this},retries(t){return e.Retries=t,this},build:()=>Object.keys(e).flatMap((t=>e[t]?[`${\"Title\"!==t?`${t}: `:\"\"}${e[t]}`]:[])).join(\"\\n\")}},p=[521,524],l=e=>async(...t)=>{let n=await e(...t);p.includes(n.status)&&(n=await e(...t),n.retries=1);const o=await n.text();return n.text=()=>Promise.resolve(o),n.json=()=>Promise.resolve(JSON.parse(o)),n.clone=()=>n,n},d=(e,t)=>{const n=t||fetch;return n||null==e||e.warn(\"Fetch is not defined, you will not be able to send http requests, if you are running in a test, make sure fetch is defined globally\"),e?async(...t)=>{if(!n)throw Error(\"Cannot send http request, fetch is not defined, if you are running in a test, make sure fetch is defined globally\");e.log((e=>r().title(\"Request\").url(e[0]).method(e[1].method).headers(e[1].headers).body(e[1].body).build())(t));const o=await l(n)(...t);return e[o.ok?\"log\":\"error\"](await(async e=>{const t=await e.text();return r().title(\"Response\").url(e.url.toString()).status(`${e.status} ${e.statusText}`).headers(e.headers).body(t).retries(e.retries).build()})(o)),o}:l(n)};let u;const c=()=>{if(u)return u;const e=new Date,t=`${e.getUTCFullYear().toString()}-${(e.getUTCMonth()+1).toString().padStart(2,\"0\")}-${e.getUTCDate().toString().padStart(2,\"0\")}-${e.getUTCHours().toString().padStart(2,\"0\")}:${e.getUTCMinutes().toString().padStart(2,\"0\")}:${e.getUTCSeconds().toString().padStart(2,\"0\")}:${e.getUTCMilliseconds().toString()}`,n=Math.floor(1e3+9e3*Math.random());return u=`${t}-${n}`,u};var g;!function(e){e.get=\"GET\",e.delete=\"DELETE\",e.post=\"POST\",e.put=\"PUT\",e.patch=\"PATCH\"}(g||(g={}));const h=({path:e,baseUrl:t,queryParams:o,projectId:s})=>{const i=s.slice(1,-27);t=t.replace(n,i?i+\".\":\"\");let a=e?`${t.replace(/\\/$/,\"\")}/${null==e?void 0:e.replace(/^\\//,\"\")}`:t;if(o){const e=Object.keys(o);e.forEach(((t,n)=>{a=`${a}${0===n?\"?\":\"\"}${t}=${encodeURIComponent(o[t])}${n===e.length-1?\"\":\"&\"}`}))}return a},v=(...e)=>new Headers(e.reduce(((e,t)=>((e=>Array.isArray(e)?e:e instanceof Headers?Array.from(e.entries()):e?Object.entries(e):[])(t).forEach((([t,n])=>{e[t]=\"function\"==typeof n?n():n})),e)),{})),f={\"Content-Type\":\"application/json\"},m=(e,t=\"\")=>{let n=e;return t&&(n=n+\":\"+t),{Authorization:`Bearer ${n}`}},k=(e,t)=>{const n={\"x-descope-sdk-session-id\":c(),\"x-descope-sdk-name\":\"core-js\",\"x-descope-sdk-version\":\"2.49.0\",\"x-descope-project-id\":e};return t&&(n[\"x-descope-refresh-cookie-name\"]=t),n},I=e=>{try{e=JSON.parse(e)}catch(e){return!1}return\"object\"==typeof e&&null!==e};var b=(e=>t=>{var n;return e(Object.assign(Object.assign({},t),{hooks:{beforeRequest:e=>{var n;const o=[].concat((null===(n=t.hooks)||void 0===n?void 0:n.beforeRequest)||[]);return null==o?void 0:o.reduce(((e,t)=>t(e)),e)},afterRequest:async(e,n)=>{var o;const s=[].concat((null===(o=t.hooks)||void 0===o?void 0:o.afterRequest)||[]);if(0==s.length)return;(await Promise.allSettled(null==s?void 0:s.map((t=>t(e,null==n?void 0:n.clone()))))).forEach((e=>{var n;return\"rejected\"===e.status&&(null===(n=t.logger)||void 0===n?void 0:n.error(e.reason))}))},transformResponse:null===(n=t.hooks)||void 0===n?void 0:n.transformResponse}}))})((({baseUrl:e,projectId:t,baseConfig:n,refreshCookieName:s,logger:i,hooks:a,cookiePolicy:r,fetch:p})=>{const l=e||o,u=d(i,p),c=async e=>{var o;const i=(null==a?void 0:a.beforeRequest)?a.beforeRequest(e):e,{path:p,body:d,headers:c,queryParams:g,method:b,token:y}=i,O=(e=>void 0===e?void 0:JSON.stringify(e))(d),w={headers:v(m(t,y),k(t,s),(null==n?void 0:n.baseHeaders)||{},I(O)?f:{},c),method:b,body:O};null!==r&&(w.credentials=r||\"include\");const j=await u(h({path:p,baseUrl:l,queryParams:g,projectId:t}),w);if((null==a?void 0:a.afterRequest)&&await a.afterRequest(e,null==j?void 0:j.clone()),null==a?void 0:a.transformResponse){const e=await j.json(),t=((null===(o=j.headers)||void 0===o?void 0:o.get(\"set-cookie\"))||\"\").split(\";\").reduce(((e,t)=>{const[n,o]=t.split(\"=\");return Object.assign(Object.assign({},e),{[n.trim()]:o})}),{}),n=Object.assign(Object.assign({},j),{json:()=>Promise.resolve(e),cookies:t});return n.clone=()=>n,a.transformResponse(n)}return j};return{get:(e,{headers:t,queryParams:n,token:o}={})=>c({path:e,headers:t,queryParams:n,body:void 0,method:g.get,token:o}),post:(e,t,{headers:n,queryParams:o,token:s}={})=>c({path:e,headers:n,queryParams:o,body:t,method:g.post,token:s}),patch:(e,t,{headers:n,queryParams:o,token:s}={})=>c({path:e,headers:n,queryParams:o,body:t,method:g.patch,token:s}),put:(e,t,{headers:n,queryParams:o,token:s}={})=>c({path:e,headers:n,queryParams:o,body:t,method:g.put,token:s}),delete:(e,{headers:t,queryParams:n,token:o}={})=>c({path:e,headers:t,queryParams:n,body:void 0,method:g.delete,token:o}),hooks:a,buildUrl:(e,n)=>h({projectId:t,baseUrl:l,path:e,queryParams:n})}})),y={TOO_MANY_REQUESTS:429};function O(e,t,n){var o;let s=w(e);if(t){if(!(null==s?void 0:s.tenants)&&(null==s?void 0:s[a])===t)return(null==s?void 0:s[n])||[];s=null===(o=null==s?void 0:s.tenants)||void 0===o?void 0:o[t]}const i=null==s?void 0:s[n];return Array.isArray(i)?i:[]}function w(t){if(\"string\"!=typeof t||!t)throw new Error(\"Invalid token provided\");return e(t)}function j(e){const{exp:t}=w(e);return(new Date).getTime()/1e3>t}function U(e){let t=w(e);const n=Object.keys(null==t?void 0:t.tenants);return Array.isArray(n)?n:[]}function T(e,t){return O(e,t,\"permissions\")}function R(e,t){return O(e,t,\"roles\")}const x=(...e)=>e.join(\"/\").replace(/\\/{2,}/g,\"/\");async function P(e,t){var n;const o=await e,s={code:o.status,ok:o.ok,response:o},i=await o.clone().json();return o.ok?s.data=t?t(i):i:(s.error=i,o.status===y.TOO_MANY_REQUESTS&&Object.assign(s.error,{retryAfter:Number.parseInt(null===(n=o.headers)||void 0===n?void 0:n.get(\"retry-after\"))||0})),s}function $(e){var t;return(null===(t=w(e))||void 0===t?void 0:t[a])||\"\"}const q=(e,t)=>(n=t)=>t=>!e(t)&&n.replace(\"{val}\",t),S=(e,t)=>(n=t)=>t=>{const o=e.filter((e=>e(t)));return!(o.length<e.length)&&(n?n.replace(\"{val}\",t):o.join(\" OR \"))},C=(...e)=>({validate:t=>(e.forEach((e=>{const n=e(t);if(n)throw new Error(n)})),!0)}),A=e=>t=>e.test(t),L=A(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/),E=A(/^\\+[1-9]{1}[0-9]{3,14}$/),M=(e,t)=>n=>C(...t).validate(((e,t,n)=>{const o=(Array.isArray(t)?t.join(\".\"):String(t)).replace(/\\[\\\\?(\"|')?(\\w|d)+\\\\?(\"|')?\\]/g,((e,t,n)=>\".\"+n)).split(\".\"),s=o.length;let i=0,a=e===Object(e)?e:void 0;for(;null!=a&&i<s;)a=a[o[i++]];return i&&i===s&&void 0!==a?a:n})(n,e)),N=q(L,'\"{val}\" is not a valid email'),D=q(E,'\"{val}\" is not a valid phone number'),H=q((J=1,e=>e.length>=J),\"Minimum length is 1\");var J;const z=q((e=>\"string\"==typeof e),\"Input is not a string\"),_=q((e=>Array.isArray(e)),\"Input is not an array\"),F=q((e=>\"boolean\"==typeof e),\"Input is not a boolean\"),K=q((e=>void 0===e),\"Input is defined\"),V=S([z(),K()],\"Input is not a string or undefined\"),Y=S([_(),F()],\"Input is not an array or boolean\"),Z=(...e)=>t=>(...n)=>(e.forEach(((e,t)=>C(...e).validate(n[t]))),t(...n)),B=e=>[z(`\"${e}\" must be a string`)],Q=e=>[V(`\"${e}\" must be string or undefined`)],G=e=>[z(`\"${e}\" must be a string`),H(`\"${e}\" must not be empty`)],W=e=>[z(`\"${e}\" must be a string`),N()],X=e=>[z(`\"${e}\" must be a string`),D()],ee=Z(G(\"accessKey\")),te=e=>({exchange:ee(((n,o)=>P(e.post(t.accessKey.exchange,{loginOptions:o},{token:n}))))}),ne=(e,t,n)=>(t.forEach((t=>{const o=t.split(\".\");let s=o.shift(),i=e;for(;o.length>0;){if(i=i[s],!s||!i)throw Error(`Invalid path \"${t}\", \"${s}\" is missing or has no value`);s=o.shift()}if(\"function\"!=typeof i[s])throw Error(`\"${t}\" is not a function`);const a=i[s];i[s]=n(a)})),e),oe=({pollingIntervalMs:e=1e3,timeoutMs:t=6e5}={})=>({pollingIntervalMs:Math.max(e||s,s),timeoutMs:Math.min(t||i,i)});var se,ie;!function(e){e.sms=\"sms\",e.voice=\"voice\",e.whatsapp=\"whatsapp\"}(se||(se={})),function(e){e.email=\"email\"}(ie||(ie={}));const ae=Object.assign(Object.assign({},se),ie);var re;!function(e){e.waiting=\"waiting\",e.running=\"running\",e.completed=\"completed\",e.failed=\"failed\"}(re||(re={}));const pe=G(\"loginId\"),le=Z(G(\"token\")),de=Z(pe),ue=Z(G(\"pendingRef\")),ce=Z(pe,W(\"email\")),ge=e=>({verify:le((n=>P(e.post(t.enchantedLink.verify,{token:n})))),signIn:de(((n,o,s,i)=>P(e.post(x(t.enchantedLink.signIn,ae.email),{loginId:n,URI:o,loginOptions:s},{token:i})))),signUpOrIn:de(((n,o,s)=>P(e.post(x(t.enchantedLink.signUpOrIn,ae.email),{loginId:n,URI:o,loginOptions:s})))),signUp:de(((n,o,s,i)=>P(e.post(x(t.enchantedLink.signUp,ae.email),{loginId:n,URI:o,user:s,loginOptions:i})))),waitForSession:ue(((n,o)=>new Promise((s=>{const{pollingIntervalMs:i,timeoutMs:a}=oe(o);let r;const p=setInterval((async()=>{const o=await e.post(t.enchantedLink.session,{pendingRef:n});o.ok&&(clearInterval(p),r&&clearTimeout(r),s(P(Promise.resolve(o))))}),i);r=setTimeout((()=>{s({error:{errorDescription:`Session polling timeout exceeded: ${a}ms`,errorCode:\"0\"},ok:!1}),clearInterval(p)}),a)})))),update:{email:ce(((n,o,s,i,a)=>P(e.post(t.enchantedLink.update.email,Object.assign({loginId:n,email:o,URI:s},a),{token:i}))))}}),he=Z(G(\"flowId\")),ve=Z(G(\"executionId\"),G(\"stepId\"),G(\"interactionId\")),fe=e=>({start:he(((n,o,s,i,a,r,p)=>P(e.post(t.flow.start,{flowId:n,options:o,conditionInteractionId:s,interactionId:i,componentsVersion:a,flowVersions:r,input:p})))),next:ve(((n,o,s,i,a,r)=>P(e.post(t.flow.next,{executionId:n,stepId:o,interactionId:s,version:i,componentsVersion:a,input:r}))))}),me=G(\"loginId\"),ke=Z(G(\"token\")),Ie=Z(me),be=Z(me,X(\"phone\")),ye=Z(me,W(\"email\")),Oe=Object.keys(ae).filter((e=>e!==se.voice)),we=e=>({verify:ke((n=>P(e.post(t.magicLink.verify,{token:n})))),signIn:Oe.reduce(((n,o)=>Object.assign(Object.assign({},n),{[o]:Ie(((n,s,i,a)=>P(e.post(x(t.magicLink.signIn,o),{loginId:n,URI:s,loginOptions:i},{token:a}))))})),{}),signUp:Oe.reduce(((n,o)=>Object.assign(Object.assign({},n),{[o]:Ie(((n,s,i,a)=>P(e.post(x(t.magicLink.signUp,o),{loginId:n,URI:s,user:i,loginOptions:a}))))})),{}),signUpOrIn:Oe.reduce(((n,o)=>Object.assign(Object.assign({},n),{[o]:Ie(((n,s,i)=>P(e.post(x(t.magicLink.signUpOrIn,o),{loginId:n,URI:s,loginOptions:i}))))})),{}),update:{email:ye(((n,o,s,i,a)=>P(e.post(t.magicLink.update.email,Object.assign({loginId:n,email:o,URI:s},a),{token:i})))),phone:Object.keys(se).filter((e=>e!==se.voice)).reduce(((n,o)=>Object.assign(Object.assign({},n),{[o]:be(((n,s,i,a,r)=>P(e.post(x(t.magicLink.update.phone,o),Object.assign({loginId:n,phone:s,URI:i},r),{token:a}))))})),{})}});var je;!function(e){e.facebook=\"facebook\",e.github=\"github\",e.google=\"google\",e.microsoft=\"microsoft\",e.gitlab=\"gitlab\",e.apple=\"apple\",e.discord=\"discord\",e.linkedin=\"linkedin\",e.slack=\"slack\"}(je||(je={}));const Ue=Z(G(\"code\")),Te=e=>({start:Object.assign(((n,o,s,i,a)=>P(e.post(t.oauth.start,s||{},{queryParams:Object.assign(Object.assign({provider:n},o&&{redirectURL:o}),a&&{loginHint:a}),token:i}))),Object.keys(je).reduce(((n,o)=>Object.assign(Object.assign({},n),{[o]:(n,s,i,a)=>P(e.post(t.oauth.start,s||{},{queryParams:Object.assign(Object.assign({provider:o},n&&{redirectURL:n}),a&&{loginHint:a}),token:i}))})),{})),exchange:Ue((n=>P(e.post(t.oauth.exchange,{code:n})))),startNative:(n,o,s)=>P(e.post(t.oauth.startNative,{provider:n,loginOptions:o,implicit:s})),finishNative:(n,o,s,i,a)=>P(e.post(t.oauth.finishNative,{provider:n,stateId:o,user:s,code:i,idToken:a})),getOneTapClientId:n=>P(e.get(t.oauth.oneTap.getOneTapClientId.replace(\"{provider}\",n))),verifyOneTapIDToken:(n,o,s,i)=>P(e.post(t.oauth.oneTap.verifyOneTapIDToken,{provider:n,idToken:o,nonce:s,loginOptions:i})),exchangeOneTapIDToken:(n,o,s,i)=>P(e.post(t.oauth.oneTap.exchangeOneTapIDToken,{provider:n,idToken:o,nonce:s,loginOptions:i}))}),Re=G(\"appId\"),xe=Z(Re),Pe=e=>({connect:xe(((n,o,s)=>{const i=null==o?void 0:o.tenantId,a=null==o?void 0:o.tenantLevel;return null==o||delete o.tenantId,null==o||delete o.tenantLevel,P(e.post(t.outbound.connect,{appId:n,tenantId:i,tenantLevel:a,options:o},{token:s}))}))}),$e=G(\"loginId\"),qe=Z($e,G(\"code\")),Se=Z($e),Ce=Z($e,X(\"phone\")),Ae=Z($e,W(\"email\")),Le=e=>({verify:Object.keys(ae).reduce(((n,o)=>Object.assign(Object.assign({},n),{[o]:qe(((n,s)=>P(e.post(x(t.otp.verify,o),{code:s,loginId:n}))))})),{}),signIn:Object.keys(ae).reduce(((n,o)=>Object.assign(Object.assign({},n),{[o]:Se(((n,s,i)=>P(e.post(x(t.otp.signIn,o),{loginId:n,loginOptions:s},{token:i}))))})),{}),signUp:Object.keys(ae).reduce(((n,o)=>Object.assign(Object.assign({},n),{[o]:Se(((n,s,i)=>P(e.post(x(t.otp.signUp,o),{loginId:n,user:s,loginOptions:i}))))})),{}),signUpOrIn:Object.keys(ae).reduce(((n,o)=>Object.assign(Object.assign({},n),{[o]:Se(((n,s)=>P(e.post(x(t.otp.signUpOrIn,o),{loginId:n,loginOptions:s}))))})),{}),update:{email:Ae(((n,o,s,i)=>P(e.post(t.otp.update.email,Object.assign({loginId:n,email:o},i),{token:s})))),phone:Object.keys(se).reduce(((n,o)=>Object.assign(Object.assign({},n),{[o]:Ce(((n,s,i,a)=>P(e.post(x(t.otp.update.phone,o),Object.assign({loginId:n,phone:s},a),{token:i}))))})),{})}}),Ee=Z(G(\"tenant\")),Me=Z(G(\"code\")),Ne=e=>({start:Ee(((n,o,s,i,a,r,p)=>P(e.post(t.saml.start,s||{},Object.assign({queryParams:Object.assign(Object.assign(Object.assign(Object.assign({tenant:n},o&&{redirectURL:o}),a&&{ssoId:a}),r&&{forceAuthn:\"true\"}),p&&{loginHint:p})},i&&{token:i}))))),exchange:Me((n=>P(e.post(t.saml.exchange,{code:n}))))}),De=G(\"loginId\"),He=Z(De,G(\"code\")),Je=Z(De),ze=Z(De),_e=e=>({signUp:Je(((n,o)=>P(e.post(t.totp.signUp,{loginId:n,user:o})))),verify:He(((n,o,s,i)=>P(e.post(t.totp.verify,{loginId:n,code:o,loginOptions:s},{token:i})))),update:ze(((n,o)=>P(e.post(t.totp.update,{loginId:n},{token:o}))))}),Fe=G(\"loginId\"),Ke=G(\"newPassword\"),Ve=Z(Fe,G(\"password\")),Ye=Z(Fe),Ze=Z(Fe,Ke),Be=Z(Fe,G(\"oldPassword\"),Ke),Qe=e=>({signUp:Ve(((n,o,s,i)=>P(e.post(t.password.signUp,{loginId:n,password:o,user:s,loginOptions:i})))),signIn:Ve(((n,o,s)=>P(e.post(t.password.signIn,{loginId:n,password:o,loginOptions:s})))),sendReset:Ye(((n,o,s)=>P(e.post(t.password.sendReset,{loginId:n,redirectUrl:o,templateOptions:s})))),update:Ze(((n,o,s)=>P(e.post(t.password.update,{loginId:n,newPassword:o},{token:s})))),replace:Be(((n,o,s)=>P(e.post(t.password.replace,{loginId:n,oldPassword:o,newPassword:s})))),policy:()=>P(e.get(t.password.policy))}),Ge=B(\"loginId\"),We=G(\"loginId\"),Xe=G(\"origin\"),et=Z(We,Xe,G(\"name\")),tt=Z(We,Xe),nt=Z(Ge,Xe),ot=Z(We,Xe,Q(\"token\")),st=Z(G(\"transactionId\"),G(\"response\")),it=e=>({signUp:{start:et(((n,o,s,i)=>P(e.post(t.webauthn.signUp.start,{user:{loginId:n,name:s},origin:o,passkeyOptions:i})))),finish:st(((n,o)=>P(e.post(t.webauthn.signUp.finish,{transactionId:n,response:o}))))},signIn:{start:nt(((n,o,s,i,a)=>P(e.post(t.webauthn.signIn.start,{loginId:n,origin:o,loginOptions:s,passkeyOptions:a},{token:i})))),finish:st(((n,o)=>P(e.post(t.webauthn.signIn.finish,{transactionId:n,response:o}))))},signUpOrIn:{start:tt(((n,o,s)=>P(e.post(t.webauthn.signUpOrIn.start,{loginId:n,origin:o,passkeyOptions:s}))))},update:{start:ot(((n,o,s,i)=>P(e.post(t.webauthn.update.start,{loginId:n,origin:o,passkeyOptions:i},{token:s})))),finish:st(((n,o)=>P(e.post(t.webauthn.update.finish,{transactionId:n,response:o}))))}}),at=B(\"loginId\"),rt=Z(at),pt=Z(G(\"pendingRef\")),lt=e=>({signUpOrIn:rt(((n,o)=>P(e.post(t.notp.signUpOrIn,{loginId:n,loginOptions:o})))),signUp:rt(((n,o,s)=>P(e.post(t.notp.signUp,{loginId:n,user:o,loginOptions:s})))),signIn:rt(((n,o,s)=>P(e.post(t.notp.signIn,{loginId:n,loginOptions:o},{token:s})))),waitForSession:pt(((n,o)=>new Promise((s=>{const{pollingIntervalMs:i,timeoutMs:a}=oe(o);let r;const p=setInterval((async()=>{const o=await e.post(t.notp.session,{pendingRef:n});o.ok&&(clearInterval(p),r&&clearTimeout(r),s(P(Promise.resolve(o))))}),i);r=setTimeout((()=>{s({error:{errorDescription:`Session polling timeout exceeded: ${a}ms`,errorCode:\"0\"},ok:!1}),clearInterval(p)}),a)}))))}),dt=Z(G(\"token\")),ut=Z(Q(\"token\"));var ct,gt,ht=Z([(ct=\"projectId\",gt=G(\"projectId\"),q(M(ct,gt))())])((e=>{const{projectId:n,logger:o,baseUrl:s,cookiePolicy:i,baseHeaders:a={},refreshCookieName:r,fetch:p}=e;return l=b({baseUrl:s,projectId:n,logger:o,hooks:{get beforeRequest(){var t;return null===(t=e.hooks)||void 0===t?void 0:t.beforeRequest},get afterRequest(){var t;return null===(t=e.hooks)||void 0===t?void 0:t.afterRequest},get transformResponse(){var t;return null===(t=e.hooks)||void 0===t?void 0:t.transformResponse}},cookiePolicy:i,baseConfig:{baseHeaders:a},refreshCookieName:r,fetch:p}),{accessKey:te(l),otp:Le(l),magicLink:we(l),enchantedLink:ge(l),oauth:Te(l),outbound:Pe(l),saml:Ne(l),totp:_e(l),notp:lt(l),webauthn:it(l),password:Qe(l),flow:fe(l),refresh:ut(((e,n,o,s)=>{const i={};o&&(i.externalToken=o);const a=s?t.tryRefresh:t.refresh;return P(l.post(a,i,{token:e,queryParams:n}))})),selectTenant:Z([z(\"tenantId\")],[V('\"token\" must be string or undefined')])(((e,n)=>P(l.post(t.selectTenant,{tenant:e},{token:n})))),logout:ut((e=>P(l.post(t.logout,{},{token:e})))),logoutAll:ut((e=>P(l.post(t.logoutAll,{},{token:e})))),me:ut((e=>P(l.get(t.me,{token:e})))),myTenants:Z([Y('\"tenants\" must a string array or a boolean')],[V('\"token\" must be string or undefined')])(((e,n)=>{const o={};return\"boolean\"==typeof e?o.dct=e:o.ids=e,P(l.post(t.myTenants,o,{token:n}))})),history:ut((e=>P(l.get(t.history,{token:e})))),isJwtExpired:dt(j),getTenants:dt(U),getJwtPermissions:dt(T),getJwtRoles:dt(R),getCurrentTenant:dt($),httpClient:l};var l})),vt=Object.assign(ht,{DeliveryMethods:ae});export{y as HttpStatusCodes,b as createHttpClient,vt as default,oe as normalizeWaitForSessionConfig,P as transformResponse,ne as wrapWith};\n//# sourceMappingURL=index.esm.js.map\n","const logger = {\n  debug: (...args: any[]) => {\n    // eslint-disable-next-line no-console\n    console.debug(...args);\n  },\n};\n\nexport default logger;\n","const OIDC_CLIENT_TS_VERSION = '3.2.0';\n\n// This sdk can be used in SSR apps\nexport const IS_BROWSER = typeof window !== 'undefined';\n\n// Maximum timeout value for setTimeout\n// For more information, refer to https://developer.mozilla.org/en-US/docs/Web/API/setTimeout#maximum_delay_value\nexport const MAX_TIMEOUT = Math.pow(2, 31) - 1;\n\n// The amount of time (ms) to trigger the refresh before session expires\nexport const REFRESH_THRESHOLD = 20 * 1000; // 20 sec\n\nexport const OIDC_CLIENT_TS_DESCOPE_CDN_URL = `https://descopecdn.com/npm/oidc-client-ts@${OIDC_CLIENT_TS_VERSION}/dist/browser/oidc-client-ts.min.js`;\nexport const OIDC_CLIENT_TS_JSDELIVR_CDN_URL = `https://cdn.jsdelivr.net/npm/oidc-client-ts@${OIDC_CLIENT_TS_VERSION}/dist/browser/oidc-client-ts.min.js`;\n\nexport const OIDC_LOGOUT_ERROR_CODE = 'J161000';\nexport const OIDC_REFRESH_ERROR_CODE = 'J161001';\n","import { jwtDecode, JwtPayload } from 'jwt-decode';\nimport logger from '../helpers/logger';\nimport { MAX_TIMEOUT, REFRESH_THRESHOLD } from '../../constants';\n\n/**\n * Get the JWT expiration WITHOUT VALIDATING the JWT\n * @param token The JWT to extract expiration from\n * @returns The Date for when the JWT expires or null if there is an issue\n */\nexport const getTokenExpiration = (\n  token: string,\n  sessionExpiration: number,\n) => {\n  if (sessionExpiration) {\n    return new Date(sessionExpiration * 1000);\n  }\n\n  logger.debug(\n    'Could not extract expiration time from session token, trying to decode the token',\n  );\n  try {\n    const claims = jwtDecode<JwtPayload>(token);\n    if (claims.exp) {\n      return new Date(claims.exp * 1000);\n    }\n  } catch (e) {\n    return null;\n  }\n};\n\nexport const millisecondsUntilDate = (date: Date) =>\n  date ? date.getTime() - new Date().getTime() : 0;\n\nexport const createTimerFunctions = () => {\n  const timerIds: NodeJS.Timeout[] = [];\n\n  const clearAllTimers = () => {\n    while (timerIds.length) {\n      clearTimeout(timerIds.pop());\n    }\n  };\n\n  const setTimer = (cb: () => void, timeout: number) => {\n    timerIds.push(setTimeout(cb, timeout));\n  };\n\n  return { clearAllTimers, setTimer };\n};\n\nexport const getAutoRefreshTimeout = (sessionExpiration: Date) => {\n  let timeout = millisecondsUntilDate(sessionExpiration) - REFRESH_THRESHOLD;\n\n  if (timeout > MAX_TIMEOUT) {\n    logger.debug(\n      `Timeout is too large (${timeout}ms), setting it to ${MAX_TIMEOUT}ms`,\n    );\n    timeout = MAX_TIMEOUT;\n  }\n\n  return timeout;\n};\n","/*! js-cookie v3.0.5 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (name, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    name = encodeURIComponent(name)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      name + '=' + converter.write(value, name) + stringifiedAttributes)\n  }\n\n  function get (name) {\n    if (typeof document === 'undefined' || (arguments.length && !name)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var found = decodeURIComponent(parts[0]);\n        jar[found] = converter.read(value, found);\n\n        if (name === found) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return name ? jar[name] : jar\n  }\n\n  return Object.create(\n    {\n      set,\n      get,\n      remove: function (name, attributes) {\n        set(\n          name,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport { api as default };\n","/** Default name for the session cookie name / local storage key */\nexport const SESSION_TOKEN_KEY = 'DS';\n/** Default name for the refresh local storage key */\nexport const REFRESH_TOKEN_KEY = 'DSR';\n/* Default name for the id token local storage key */\nexport const ID_TOKEN_KEY = 'DSI';\n","import { JWTResponse } from '@descope/core-js-sdk';\nimport Cookies from 'js-cookie';\nimport { BeforeRequestHook, WebJWTResponse } from '../../types';\nimport {\n  ID_TOKEN_KEY,\n  REFRESH_TOKEN_KEY,\n  SESSION_TOKEN_KEY,\n} from './constants';\nimport {\n  getLocalStorage,\n  removeLocalStorage,\n  setLocalStorage,\n} from '../helpers';\nimport { CookieConfig, SameSite } from './types';\n\n/**\n * Store the session JWT as a cookie on the given domain and path with the given expiration.\n * This is useful so that the application backend will automatically get the cookie for the session\n * @param name cookie name\n * @param value The JWT to store as a cookie\n * @param cookieParams configuration that is usually returned from the JWT\n */\nfunction setJwtTokenCookie(\n  name: string,\n  value: string,\n  authInfo: Partial<\n    WebJWTResponse & { cookieSameSite: SameSite; cookieSecure: boolean }\n  >,\n) {\n  if (value) {\n    const {\n      cookieDomain,\n      cookiePath,\n      cookieSameSite,\n      cookieExpiration,\n      cookieSecure,\n    } = authInfo;\n    const expires = new Date(cookieExpiration * 1000); // we are getting response from the server in seconds instead of ms\n    // Since its a JS cookie, we don't set the domain because we want the cookie to be on the same domain as the application\n    const domainMatches = isCurrentDomainOrParentDomain(cookieDomain);\n    Cookies.set(name, value, {\n      path: cookiePath,\n      domain: domainMatches ? cookieDomain : undefined,\n      expires,\n      sameSite: cookieSameSite,\n      secure: cookieSecure,\n    });\n  }\n}\n\n/*\n * Check if the cookie domain is the same as the current domain or the parent domain\n * Examples:\n * 1. cookie domain: 'example.com', current domain: 'example.com' => true\n * 2. cookie domain: 'example.com', current domain: 'sub.example.com' => true\n * 3. cookie domain: 'example.com', current domain: 'sub.sub.example.com' => true\n * 4. cookie domain: 'example.com', current domain: 'another.com' => false\n * 5. cookie domain: 'example.com', current domain: 'example.co.il' => false\n */\nfunction isCurrentDomainOrParentDomain(cookieDomain: string): boolean {\n  const currentDomain = window.location.hostname;\n  const currentDomainParts = currentDomain.split('.');\n  const cookieDomainParts = cookieDomain.split('.');\n\n  // check if the cookie domain items are the last items in the current domain\n  const currentDomainSuffix = currentDomainParts\n    .slice(-cookieDomainParts.length)\n    .join('.');\n  return currentDomainSuffix === cookieDomain;\n}\n\nexport const persistTokens = (\n  authInfo = {} as Partial<WebJWTResponse>,\n  sessionTokenViaCookie: boolean | CookieConfig = false,\n  storagePrefix = '',\n) => {\n  // persist refresh token\n  const { sessionJwt, refreshJwt } = authInfo;\n  refreshJwt &&\n    setLocalStorage(`${storagePrefix}${REFRESH_TOKEN_KEY}`, refreshJwt);\n\n  // persist session token\n  if (sessionJwt) {\n    if (sessionTokenViaCookie) {\n      // Cookie configs will fallback to default values in both cases\n      // 1. sessionTokenViaCookie is a boolean\n      // 2. sessionTokenViaCookie is an object without the property\n      const cookieSameSite = sessionTokenViaCookie['sameSite'] || 'Strict';\n      const cookieSecure = sessionTokenViaCookie['secure'] ?? true;\n      setJwtTokenCookie(SESSION_TOKEN_KEY, sessionJwt, {\n        ...(authInfo as Partial<JWTResponse>),\n        cookieSameSite,\n        cookieSecure,\n      });\n    } else {\n      setLocalStorage(`${storagePrefix}${SESSION_TOKEN_KEY}`, sessionJwt);\n    }\n  }\n\n  if (authInfo.idToken) {\n    setLocalStorage(`${storagePrefix}${ID_TOKEN_KEY}`, authInfo.idToken);\n  }\n};\n\n/** Return the refresh token from the localStorage. Not for production usage because refresh token will not be saved in localStorage. */\nexport function getRefreshToken(prefix: string = '') {\n  return getLocalStorage(`${prefix}${REFRESH_TOKEN_KEY}`) || '';\n}\n\n/**\n * Return the session token. first try to get from cookie, and fallback to local storage\n * See sessionTokenViaCookie option for more details about session token location\n */\nexport function getSessionToken(prefix: string = ''): string {\n  return (\n    Cookies.get(SESSION_TOKEN_KEY) ||\n    getLocalStorage(`${prefix}${SESSION_TOKEN_KEY}`) ||\n    ''\n  );\n}\n\nexport function getIdToken(prefix: string = ''): string {\n  return getLocalStorage(`${prefix}${ID_TOKEN_KEY}`) || '';\n}\n\n/** Remove both the localStorage refresh JWT and the session cookie */\nexport function clearTokens(prefix: string = '') {\n  removeLocalStorage(`${prefix}${REFRESH_TOKEN_KEY}`);\n  removeLocalStorage(`${prefix}${SESSION_TOKEN_KEY}`);\n  removeLocalStorage(`${prefix}${ID_TOKEN_KEY}`);\n  Cookies.remove(SESSION_TOKEN_KEY);\n}\n\nexport const beforeRequest =\n  (prefix?: string): BeforeRequestHook =>\n  (config) => {\n    return Object.assign(config, {\n      token: config.token || getRefreshToken(prefix),\n    });\n  };\n","import { IS_BROWSER } from '../../constants';\n\nconst FINGERPRINT_PUBLIC_KEY = 'fingerprint.public.key';\nconst FINGERPRINT_ENDPOINT_URL = 'fingerprint.endpoint.url';\n\n/** Fingerprint.js cloudflare integration */\nexport const FP_EP_URL =\n  (IS_BROWSER && localStorage?.getItem(FINGERPRINT_ENDPOINT_URL)) ||\n  'https://api.descope.com';\nexport const FP_CF_ENDPOINT_PATH = '/fXj8gt3x8VulJBna/x96Emn69oZwcd7I6';\nexport const FP_CF_SCRIPT_PATH = '/fXj8gt3x8VulJBna/w78aRZnnDZ3Aqw0I';\n/** Fingerprint visitor data */\nexport const FP_BODY_DATA = 'fpData';\n/** Session ID for visitor */\nexport const VISITOR_SESSION_ID_PARAM = 'vsid';\n/** Request ID for visitor */\nexport const VISITOR_REQUEST_ID_PARAM = 'vrid';\n/** FP storage key */\nexport const FP_STORAGE_KEY = 'fp';\n// Storage FP Keys TTL is 24 hours\nexport const STORAGE_TTL_MS = 24 * 60 * 60 * 1000;\n","/**\n * Fingerprint Pro v3.11.6 - Copyright (c) FingerprintJS, Inc, 2025 (https://fingerprint.com)\n */\n\nimport{__spreadArray as e,__rest as t,__assign as n}from\"tslib\";function r(e,t){return function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(e,t)?e[t]:void 0}function o(e,t,n,r){var o,i=document,a=\"securitypolicyviolation\",u=function(t){var n=new URL(e,location.href),r=t.blockedURI;r!==n.href&&r!==n.protocol.slice(0,-1)&&r!==n.origin||(o=t,R())};i.addEventListener(a,u);var R=function(){return i.removeEventListener(a,u)};return null==r||r.then(R,R),Promise.resolve().then(t).then((function(e){return R(),e}),(function(e){return new Promise((function(e){var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(null)})).then((function(){if(R(),o)return n(o);throw e}))}))}var i={default:\"endpoint\"},a={default:\"tlsEndpoint\"},u=\"Client timeout\",R=\"Network connection error\",c=\"Network request aborted\",s=\"Response cannot be parsed\",f=\"Blocked by CSP\",l=\"The endpoint parameter is not a valid URL\";function E(e){for(var t=\"\",n=0;n<e.length;++n)if(n>0){var r=e[n].toLowerCase();r!==e[n]?t+=\" \".concat(r):t+=e[n]}else t+=e[n].toUpperCase();return t}var d=/*#__PURE__*/E(\"WrongRegion\"),p=/*#__PURE__*/E(\"SubscriptionNotActive\"),v=/*#__PURE__*/E(\"UnsupportedVersion\"),_=/*#__PURE__*/E(\"InstallationMethodRestricted\"),O=/*#__PURE__*/E(\"HostnameRestricted\"),h=/*#__PURE__*/E(\"IntegrationFailed\"),I=\"API key required\",N=\"API key not found\",T=\"API key expired\",m=\"Request cannot be parsed\",w=\"Request failed\",A=\"Request failed to process\",P=\"Too many requests, rate limit exceeded\",y=\"Not available for this origin\",D=\"Not available with restricted header\",S=I,g=N,L=T,U=\"3.11.6\",b=\"Failed to load the JS script of the agent\",C=\"9319\";function M(t,n){var r,o,i,a,u,R,c,s=[],E=(r=function(t){var n=e([],t,!0);return{current:function(){return n[0]},postpone:function(){var e=n.shift();void 0!==e&&n.push(e)},exclude:function(){n.shift()}}}(t),a=100,u=3e3,R=0,o=function(){return Math.random()*Math.min(u,a*Math.pow(2,R++))},i=new Set,[r.current(),function(e,t){var n,a=t instanceof Error?t.message:\"\";if(a===f||a===l)r.exclude(),n=0;else if(a===C)r.exclude();else if(a===b){var u=Date.now()-e.getTime()<50,R=r.current();R&&u&&!i.has(R)&&(i.add(R),n=0),r.postpone()}else r.postpone();var c=r.current();return void 0===c?void 0:[c,null!=n?n:e.getTime()+o()-Date.now()]}]),d=E[0],p=E[1];if(void 0===d)return Promise.reject(new TypeError(\"The list of script URL patterns is empty\"));var v=function(e){var t=new Date,r=function(n){return s.push({url:e,startedAt:t,finishedAt:new Date,error:n})},o=n(e);return o.then((function(){return r()}),r),o.catch((function(e){if(null!=c||(c=e),s.length>=5)throw c;var n=p(t,e);if(!n)throw c;var r,o=n[0],i=n[1];return(r=i,new Promise((function(e){return setTimeout(e,r)}))).then((function(){return v(o)}))}))};return v(d).then((function(e){return[e,s]}))}var K=\"https://fpnpmcdn.net/v<version>/<apiKey>/loader_v<loaderVersion>.js\",B=K;function F(e){var o;e.scriptUrlPattern;var i=e.token,a=e.apiKey,u=void 0===a?i:a,R=t(e,[\"scriptUrlPattern\",\"token\",\"apiKey\"]),c=null!==(o=r(e,\"scriptUrlPattern\"))&&void 0!==o?o:K,s=function(){var e=[],t=function(){e.push({time:new Date,state:document.visibilityState})},n=function(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}(document,\"visibilitychange\",t);return t(),[e,n]}(),f=s[0],l=s[1];return Promise.resolve().then((function(){if(!u||\"string\"!=typeof u)throw new Error(I);var e=function(e,t){return(Array.isArray(e)?e:[e]).map((function(e){return function(e,t){var n=encodeURIComponent;return e.replace(/<[^<>]+>/g,(function(e){return\"<version>\"===e?\"3\":\"<apiKey>\"===e?n(t):\"<loaderVersion>\"===e?n(U):e}))}(String(e),t)}))}(c,u);return M(e,V)})).catch((function(e){throw l(),function(e){if(e instanceof Error&&e.message===C)return new Error(b);return e}(e)})).then((function(e){var t=e[0],r=e[1];return l(),t.load(n(n({},R),{ldi:{attempts:r,visibilityStates:f}}))}))}function V(e){return o(e,(function(){return function(e){return new Promise((function(t,n){if(function(e){if(URL.prototype)try{return new URL(e,location.href),!1}catch(t){if(t instanceof Error&&\"TypeError\"===t.name)return!0;throw t}}(e))throw new Error(l);var r=document.createElement(\"script\"),o=function(){var e;return null===(e=r.parentNode)||void 0===e?void 0:e.removeChild(r)},i=document.head||document.getElementsByTagName(\"head\")[0];r.onload=function(){o(),t()},r.onerror=function(){o(),n(new Error(b))},r.async=!0,r.src=e,i.appendChild(r)}))}(e)}),(function(){throw new Error(f)})).then(k)}function k(){var e=window,t=\"__fpjs_p_l_b\",n=e[t];if(function(e,t){var n,r=null===(n=Object.getOwnPropertyDescriptor)||void 0===n?void 0:n.call(Object,e,t);(null==r?void 0:r.configurable)?delete e[t]:r&&!r.writable||(e[t]=void 0)}(e,t),\"function\"!=typeof(null==n?void 0:n.load))throw new Error(C);return n}var G={load:F,defaultScriptUrlPattern:B,ERROR_SCRIPT_LOAD_FAIL:b,ERROR_API_KEY_EXPIRED:T,ERROR_API_KEY_INVALID:N,ERROR_API_KEY_MISSING:I,ERROR_BAD_REQUEST_FORMAT:m,ERROR_BAD_RESPONSE_FORMAT:s,ERROR_CLIENT_TIMEOUT:u,ERROR_CSP_BLOCK:f,ERROR_FORBIDDEN_ENDPOINT:O,ERROR_FORBIDDEN_HEADER:D,ERROR_FORBIDDEN_ORIGIN:y,ERROR_GENERAL_SERVER_FAILURE:w,ERROR_INSTALLATION_METHOD_RESTRICTED:_,ERROR_INTEGRATION_FAILURE:h,ERROR_INVALID_ENDPOINT:l,ERROR_NETWORK_ABORT:c,ERROR_NETWORK_CONNECTION:R,ERROR_RATE_LIMIT:P,ERROR_SERVER_TIMEOUT:A,ERROR_SUBSCRIPTION_NOT_ACTIVE:p,ERROR_TOKEN_EXPIRED:L,ERROR_TOKEN_INVALID:g,ERROR_TOKEN_MISSING:S,ERROR_UNSUPPORTED_VERSION:v,ERROR_WRONG_REGION:d,defaultEndpoint:i,defaultTlsEndpoint:a};export{T as ERROR_API_KEY_EXPIRED,N as ERROR_API_KEY_INVALID,I as ERROR_API_KEY_MISSING,m as ERROR_BAD_REQUEST_FORMAT,s as ERROR_BAD_RESPONSE_FORMAT,u as ERROR_CLIENT_TIMEOUT,f as ERROR_CSP_BLOCK,O as ERROR_FORBIDDEN_ENDPOINT,D as ERROR_FORBIDDEN_HEADER,y as ERROR_FORBIDDEN_ORIGIN,w as ERROR_GENERAL_SERVER_FAILURE,_ as ERROR_INSTALLATION_METHOD_RESTRICTED,h as ERROR_INTEGRATION_FAILURE,l as ERROR_INVALID_ENDPOINT,c as ERROR_NETWORK_ABORT,R as ERROR_NETWORK_CONNECTION,P as ERROR_RATE_LIMIT,b as ERROR_SCRIPT_LOAD_FAIL,A as ERROR_SERVER_TIMEOUT,p as ERROR_SUBSCRIPTION_NOT_ACTIVE,L as ERROR_TOKEN_EXPIRED,g as ERROR_TOKEN_INVALID,S as ERROR_TOKEN_MISSING,v as ERROR_UNSUPPORTED_VERSION,d as ERROR_WRONG_REGION,G as default,i as defaultEndpoint,B as defaultScriptUrlPattern,a as defaultTlsEndpoint,F as load};\n","import {\n  load,\n  defaultEndpoint,\n  defaultScriptUrlPattern,\n} from '@fingerprintjs/fingerprintjs-pro';\nimport {\n  FP_EP_URL,\n  FP_CF_ENDPOINT_PATH,\n  FP_CF_SCRIPT_PATH,\n  FP_STORAGE_KEY,\n  STORAGE_TTL_MS,\n  VISITOR_REQUEST_ID_PARAM,\n  VISITOR_SESSION_ID_PARAM,\n} from './constants';\nimport { FingerprintObject } from './types';\n\nconst createFingerprintObject = (\n  sessionId: string,\n  requestId: string,\n): FingerprintObject => ({\n  [VISITOR_SESSION_ID_PARAM]: sessionId,\n  [VISITOR_REQUEST_ID_PARAM]: requestId,\n});\n\n/** Generate UUID based on current time and some randomness */\nconst generateUUID = () => {\n  // return alphanumeric, sortable uuid of 27 characters\n  return (\n    Date.now().toString(36) +\n    Math.random().toString(36).substring(2) + // removing '0.' prefix\n    Math.random().toString(36).substring(2)\n  ).substring(0, 27);\n};\n\n// Set FP data to storage with expiration\n// We set the request id and session id together so they will have the same TTL\n// This implementation is based on https://www.sohamkamani.com/javascript/localstorage-with-ttl-expiry/\nconst setFPToStorage = (value: FingerprintObject) => {\n  const now = new Date();\n  // `item` is an object which contains the value\n  // as well as the time when it's supposed to expire\n  const item = {\n    value,\n    expiry: now.getTime() + STORAGE_TTL_MS,\n  };\n  localStorage.setItem(FP_STORAGE_KEY, JSON.stringify(item));\n};\n\n// Get Fingerprint from storage, will return null if not exists, or if expired\nconst getFPFromStorage = (returnExpired = false): FingerprintObject => {\n  const itemStr = localStorage.getItem(FP_STORAGE_KEY);\n  // if the item doesn't exist, return null\n  if (!itemStr) {\n    return null;\n  }\n  const item = JSON.parse(itemStr);\n  const now = new Date();\n  // compare the expiry time of the item with the current time\n  // return null if needed\n  if (now.getTime() > item.expiry && !returnExpired) {\n    return null;\n  }\n  return item.value;\n};\n\n/**\n * Ensure fingerprint ids (request id, session id) exist.\n * If not, It will generate and load them into to browser storage.\n * NOTE: Using fingerprintJS data has cost, use considerably.\n * @param fpKey FingerprintJS API key\n */\nexport const ensureFingerprintIds = async (\n  fpKey: string,\n  baseUrl = FP_EP_URL,\n) => {\n  try {\n    if (getFPFromStorage()) {\n      // FP is already in storage, no need to\n      return;\n    }\n\n    const sessionId = generateUUID();\n\n    const endpointUrl = new URL(baseUrl);\n    endpointUrl.pathname = FP_CF_ENDPOINT_PATH;\n\n    const patterUrl = new URL(baseUrl);\n    patterUrl.pathname = FP_CF_SCRIPT_PATH;\n    const scriptUrlPattern =\n      patterUrl.toString() +\n      '?apiKey=<apiKey>&version=<version>&loaderVersion=<loaderVersion>';\n\n    // load from FingerprintJS\n    const agentP = load({\n      apiKey: fpKey,\n      endpoint: [\n        endpointUrl.toString(),\n        defaultEndpoint, // Fallback to default endpoint in case of error\n      ],\n      scriptUrlPattern: [\n        scriptUrlPattern,\n        defaultScriptUrlPattern, // Fallback to default CDN in case of error\n      ],\n    });\n\n    const agent = await agentP;\n    const { requestId } = await agent.get({ linkedId: sessionId });\n    const fpData = createFingerprintObject(sessionId, requestId);\n    setFPToStorage(fpData);\n  } catch (ex) {\n    // eslint-disable-next-line no-console\n    console.warn('Could not load fingerprint', ex);\n  }\n};\n\n/**\n * Get Fingerprint data (request ids) from storage, or create empty object\n * If data is expired, return it anyway\n */\nexport const getFingerprintData = (): FingerprintObject | null => {\n  // get from storage if exists\n  return getFPFromStorage(true);\n};\n\n/** Clear Fingerprint data from storage */\nexport const clearFingerprintData = () => {\n  localStorage.removeItem(FP_STORAGE_KEY);\n};\n","import { IS_BROWSER } from '../../constants';\nimport { CreateWebSdk } from '../../sdk';\nimport { BeforeRequestHook } from '../../types';\nimport { addHooks } from '../helpers';\nimport { FP_BODY_DATA } from './constants';\nimport { ensureFingerprintIds, getFingerprintData } from './helpers';\nimport { FingerprintOptions } from './types';\n\nconst beforeRequest: BeforeRequestHook = (config) => {\n  const data = getFingerprintData();\n  if (data && config.body) {\n    config.body[FP_BODY_DATA] = data;\n  }\n\n  return config;\n};\n\n/**\n * Add fingerprint data to outgoing requests\n */\nexport const withFingerprint =\n  <T extends CreateWebSdk>(createSdk: T) =>\n  ({ fpKey, fpLoad, ...config }: Parameters<T>[0] & FingerprintOptions) => {\n    if (!IS_BROWSER) {\n      // Fingerprint is a client side only capability and will not work when running in the server (SSR)\n      return createSdk(config);\n    }\n\n    // load fingerprint now if needed\n    if (fpKey && fpLoad) {\n      ensureFingerprintIds(fpKey).catch(\n        // istanbul ignore next\n        () => null,\n      );\n    }\n\n    // Hook added always because fingerprint can be dynamic using flows\n    return createSdk(addHooks(config, { beforeRequest }));\n  };\n","export const FLOW_NONCE_PREFIX = 'descopeFlowNonce';\nexport const FLOW_NONCE_HEADER = 'X-Descope-Flow-Nonce';\n\nexport const FLOW_START_PATH = '/v1/flow/start';\nexport const FLOW_NEXT_PATH = '/v1/flow/next';\n\nexport const FLOW_NEXT_TTL = 3 * 60 * 60; // 3 hours in seconds\nexport const FLOW_START_TTL = 2 * 24 * 60 * 60; // 2 days in seconds\n","import { RequestConfig } from '@descope/core-js-sdk';\nimport {\n  getLocalStorage,\n  isLocalStorage,\n  removeLocalStorage,\n  setLocalStorage,\n} from '../helpers';\nimport {\n  FLOW_NEXT_PATH,\n  FLOW_NEXT_TTL,\n  FLOW_NONCE_HEADER,\n  FLOW_NONCE_PREFIX,\n  FLOW_START_TTL,\n} from './constants';\nimport { StorageItem } from './types';\n\n// Helper to create storage key from execution ID\nconst getNonceKeyForExecution = (\n  executionId: string,\n  prefix: string = FLOW_NONCE_PREFIX,\n): string => {\n  return `${prefix}${executionId}`;\n};\n\n// Get nonce from storage with expiration check\nconst getFlowNonce = (\n  executionId: string,\n  prefix: string = FLOW_NONCE_PREFIX,\n): string | null => {\n  try {\n    const key = getNonceKeyForExecution(executionId, prefix);\n    const itemStr = getLocalStorage(key);\n\n    if (!itemStr) {\n      return null;\n    }\n\n    const item: StorageItem = JSON.parse(itemStr);\n\n    if (item.expiry < Date.now()) {\n      removeFlowNonce(executionId, prefix);\n      return null;\n    }\n\n    return item.value;\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.error('Error getting flow nonce:', e);\n    return null;\n  }\n};\n\n// Store nonce with appropriate TTL\nconst setFlowNonce = (\n  executionId: string,\n  nonce: string,\n  isStart: boolean,\n  prefix: string = FLOW_NONCE_PREFIX,\n): void => {\n  try {\n    const key = getNonceKeyForExecution(executionId, prefix);\n    const ttlSeconds = isStart ? FLOW_START_TTL : FLOW_NEXT_TTL;\n\n    const item: StorageItem = {\n      value: nonce,\n      expiry: Date.now() + ttlSeconds * 1000,\n      isStart,\n    };\n\n    setLocalStorage(key, JSON.stringify(item));\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.error('Error setting flow nonce:', e);\n  }\n};\n\n// Remove nonce from storage\nconst removeFlowNonce = (\n  executionId: string,\n  prefix: string = FLOW_NONCE_PREFIX,\n): void => {\n  try {\n    const key = getNonceKeyForExecution(executionId, prefix);\n    removeLocalStorage(key);\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.error('Error removing flow nonce:', e);\n  }\n};\n\n// Extract execution ID from special format\nconst extractExecId = (executionId: string): string | null => {\n  const regex = /.*\\|#\\|(.*)/;\n  return regex.exec(executionId)?.[1] || null;\n};\n\n// Extract nonce and execution ID from response\nconst extractFlowNonce = async (\n  req: RequestConfig,\n  response: Response,\n): Promise<{ nonce: string | null; executionId: string | null }> => {\n  try {\n    const nonce = response.headers.get(FLOW_NONCE_HEADER);\n\n    // Clone the response to prevent body consumption\n    let executionId = await response\n      .clone()\n      .json()\n      .then((data) => data?.executionId || null)\n      .catch(() => null);\n\n    if (!executionId) {\n      // Fallback to request\n      executionId = getExecutionIdFromRequest(req);\n    }\n\n    return {\n      nonce,\n      executionId: extractExecId(executionId),\n    };\n  } catch (e) {\n    return { nonce: null, executionId: null };\n  }\n};\n\n// Get execution ID from request object\nconst getExecutionIdFromRequest = (req: RequestConfig): string | null => {\n  if (req.path === FLOW_NEXT_PATH && req.body?.executionId) {\n    return extractExecId(req.body.executionId);\n  }\n\n  return null;\n};\n\n// Remove expired nonces from storage\nconst cleanupExpiredNonces = (prefix: string = FLOW_NONCE_PREFIX): void => {\n  try {\n    if (!isLocalStorage) {\n      return;\n    }\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n\n      if (key && key.startsWith(prefix)) {\n        const itemStr = getLocalStorage(key);\n\n        if (itemStr) {\n          try {\n            const item: StorageItem = JSON.parse(itemStr);\n\n            if (item.expiry < Date.now()) {\n              removeLocalStorage(key);\n            }\n          } catch (parseError) {\n            removeLocalStorage(key);\n          }\n        }\n      }\n    }\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.error('Error cleaning up expired nonces:', e);\n  }\n};\n\nexport {\n  cleanupExpiredNonces,\n  extractFlowNonce,\n  getExecutionIdFromRequest,\n  getFlowNonce,\n  getNonceKeyForExecution,\n  removeFlowNonce,\n  setFlowNonce,\n};\n","/** Login Id of the last user logged in */\nexport const LOCAL_STORAGE_LAST_USER_LOGIN_ID = 'dls_last_user_login_id';\n\n/** Display name of the last user logged in */\nexport const LOCAL_STORAGE_LAST_USER_DISPLAY_NAME =\n  'dls_last_user_display_name';\n","import {\n  getLocalStorage,\n  removeLocalStorage,\n  setLocalStorage,\n} from '../helpers';\nimport {\n  LOCAL_STORAGE_LAST_USER_LOGIN_ID,\n  LOCAL_STORAGE_LAST_USER_DISPLAY_NAME,\n} from './constants';\n\nexport const setLastUserLoginId = (loginId: string) => {\n  return setLocalStorage(LOCAL_STORAGE_LAST_USER_LOGIN_ID, loginId);\n};\n\nexport const getLastUserLoginId = () => {\n  return getLocalStorage(LOCAL_STORAGE_LAST_USER_LOGIN_ID);\n};\n\nexport const removeLastUserLoginId = () => {\n  return removeLocalStorage(LOCAL_STORAGE_LAST_USER_LOGIN_ID);\n};\n\nexport const setLastUserDisplayName = (displayName: string) => {\n  return setLocalStorage(LOCAL_STORAGE_LAST_USER_DISPLAY_NAME, displayName);\n};\n\nexport const getLastUserDisplayName = () => {\n  return getLocalStorage(LOCAL_STORAGE_LAST_USER_DISPLAY_NAME);\n};\n\nexport const removeLastUserDisplayName = () => {\n  return removeLocalStorage(LOCAL_STORAGE_LAST_USER_DISPLAY_NAME);\n};\n","import { SdkFnWrapper, wrapWith } from '@descope/core-js-sdk';\nimport { CreateWebSdk } from '../../sdk';\nimport { AfterRequestHook, CoreSdk } from '../../types';\nimport { addHooks, getUserFromResponse } from '../helpers';\nimport {\n  getLastUserLoginId,\n  removeLastUserLoginId,\n  setLastUserLoginId,\n  getLastUserDisplayName,\n  removeLastUserDisplayName,\n  setLastUserDisplayName,\n} from './helpers';\nimport { LastLoggedInUserOptions } from './types';\n\n/**\n * Adds last logged in user to flow start request\n */\n// eslint-disable-next-line import/exports-last\nexport const withLastLoggedInUser =\n  <T extends CreateWebSdk>(createSdk: T) =>\n  ({\n    storeLastAuthenticatedUser = true,\n    keepLastAuthenticatedUserAfterLogout = false,\n    ...config\n  }: Parameters<T>[0] & LastLoggedInUserOptions): ReturnType<T> & {\n    getLastUserLoginId: typeof getLastUserLoginId;\n    getLastUserDisplayName: typeof getLastUserDisplayName;\n  } => {\n    if (!storeLastAuthenticatedUser) {\n      // We assign getLastUserLoginId and getLastUserDisplayName to the sdk\n      // To keep the return type consistent\n      return Object.assign(createSdk(config), {\n        getLastUserLoginId,\n        getLastUserDisplayName,\n      }) as any;\n    }\n    const afterRequest: AfterRequestHook = async (_req, res) => {\n      const userDetails = await getUserFromResponse(res);\n      const loginId = userDetails?.loginIds?.[0];\n      const displayName = userDetails?.name;\n      if (loginId) {\n        setLastUserLoginId(loginId);\n        setLastUserDisplayName(displayName);\n      }\n    };\n\n    const sdk = createSdk(addHooks(config, { afterRequest }));\n\n    let wrappedSdk = wrapWith(sdk, ['flow.start'], startWrapper);\n    wrappedSdk = wrapWith(\n      wrappedSdk,\n      ['logout', 'logoutAll'],\n      logoutWrapper(keepLastAuthenticatedUserAfterLogout),\n    );\n    return Object.assign(wrappedSdk, {\n      getLastUserLoginId,\n      getLastUserDisplayName,\n    }) as any;\n  };\n\nconst startWrapper: SdkFnWrapper<{}> =\n  (fn) =>\n  async (...args) => {\n    args[1] = args[1] || {};\n    const [, options = {}] = args as unknown as Parameters<\n      CoreSdk['flow']['start']\n    >;\n    const loginId = getLastUserLoginId();\n    const displayName = getLastUserDisplayName();\n\n    if (loginId) {\n      options.lastAuth ??= {};\n      options.lastAuth.loginId = loginId;\n      options.lastAuth.name = displayName;\n    }\n\n    const resp = await fn(...args);\n\n    return resp;\n  };\n\nconst logoutWrapper =\n  (keepOnLogout?: boolean): SdkFnWrapper<{}> =>\n  (fn) =>\n  async (...args) => {\n    const resp = await fn(...args);\n    if (keepOnLogout) {\n      return resp;\n    }\n\n    removeLastUserLoginId();\n    removeLastUserDisplayName();\n\n    return resp;\n  };\n","// create publisher/subscriber instances\nexport function createPubSub<T extends any>() {\n  const cbs = [];\n\n  const sub = (cb: (data: T) => void) => {\n    const idx = cbs.push(cb) - 1;\n    return () => cbs.splice(idx, 1);\n  };\n\n  const pub = (data: T) => {\n    cbs.forEach((cb) => cb(data));\n  };\n\n  return { pub, sub };\n}\n","import { SdkFnWrapper, UserResponse, wrapWith } from '@descope/core-js-sdk';\nimport { CreateWebSdk, WebSdk } from '../../sdk';\nimport { AfterRequestHook } from '../../types';\nimport {\n  addHooks,\n  getAuthInfoFromResponse,\n  getUserFromResponse,\n} from '../helpers';\nimport { createPubSub } from './helpers';\n\n/**\n * Adds 3 event functions to the sdk,\n * onSessionTokenChange: Gets a callback and call it whenever there is a change in session token\n * onIsAuthenticatedChange: Gets a callback and call it whenever there is a change in authentication status\n * onUserChange: Gets a callback and call it whenever there is a change in current logged in user\n */\nexport const withNotifications =\n  <T extends CreateWebSdk>(createSdk: T) =>\n  (config: Parameters<T>[0]) => {\n    const sessionExpirationPS = createPubSub<number | null>();\n    const sessionPS = createPubSub<string | null>();\n    const userPS = createPubSub<UserResponse | null>();\n\n    const afterRequest: AfterRequestHook = async (_req, res) => {\n      if (res?.status === 401) {\n        sessionPS.pub(null);\n        userPS.pub(null);\n        sessionExpirationPS.pub(null);\n      } else {\n        const userDetails = await getUserFromResponse(res);\n        if (userDetails) userPS.pub(userDetails);\n\n        const { sessionJwt, sessionExpiration } =\n          await getAuthInfoFromResponse(res);\n\n        if (sessionJwt) sessionPS.pub(sessionJwt);\n\n        if (sessionExpiration || sessionJwt) {\n          // We also publish the session expiration if there is a session jwt\n          // as a temporary fix for the issue where the session expiration is not\n          // being sent in the response in Flows (42 is a magic number)\n          sessionExpirationPS.pub(sessionExpiration || 42);\n        }\n      }\n    };\n\n    const sdk = createSdk(addHooks(config, { afterRequest }));\n\n    const wrapper: SdkFnWrapper<{}> =\n      (fn) =>\n      async (...args) => {\n        const resp = await fn(...args);\n\n        sessionPS.pub(null);\n        userPS.pub(null);\n        sessionExpirationPS.pub(null);\n\n        return resp;\n      };\n\n    const wrappedSdk = wrapWith(\n      sdk,\n      ['logout', 'logoutAll', 'oidc.logout'],\n      wrapper,\n    );\n\n    return Object.assign(wrappedSdk, {\n      onSessionTokenChange: sessionPS.sub,\n      onUserChange: userPS.sub,\n      onIsAuthenticatedChange: (cb: (isAuthenticated: boolean) => void) => {\n        // If and only if there is a session expiration, then the user is authenticated\n        return sessionExpirationPS.sub((exp) => {\n          cb(!!exp);\n        });\n      },\n    });\n  };\n","/* eslint-disable import/exports-last */\nimport { SdkFnWrapper, wrapWith } from '@descope/core-js-sdk';\nimport { IS_BROWSER } from '../../constants';\nimport { CreateWebSdk } from '../../sdk';\nimport { AfterRequestHook } from '../../types';\nimport { addHooks, getAuthInfoFromResponse } from '../helpers';\nimport {\n  beforeRequest,\n  clearTokens,\n  getRefreshToken,\n  getSessionToken,\n  persistTokens,\n  getIdToken,\n} from './helpers';\nimport { CookieConfig, PersistTokensOptions } from './types';\n\n/**\n * Persist authentication tokens in cookie/storage\n */\nexport const withPersistTokens =\n  <T extends CreateWebSdk>(createSdk: T) =>\n  <A extends CookieConfig>({\n    persistTokens: isPersistTokens,\n    sessionTokenViaCookie,\n    storagePrefix,\n    ...config\n  }: Parameters<T>[0] & PersistTokensOptions<A>): A extends false\n    ? ReturnType<T>\n    : ReturnType<T> & {\n        getRefreshToken: () => string;\n        getSessionToken: () => string;\n        getIdToken: () => string;\n      } => {\n    if (!isPersistTokens || !IS_BROWSER) {\n      if (isPersistTokens) {\n        // Storing auth tokens in local storage and cookies are a client side only capabilities\n        // and will not be done when running in the server\n      }\n      return createSdk(config) as any;\n    }\n\n    const afterRequest: AfterRequestHook = async (req, res) => {\n      const isManagementApi = /^\\/v\\d+\\/mgmt\\//.test(req.path);\n\n      if (res?.status === 401) {\n        if (!isManagementApi) {\n          clearTokens(storagePrefix);\n        }\n      } else {\n        persistTokens(\n          await getAuthInfoFromResponse(res),\n          sessionTokenViaCookie,\n          storagePrefix,\n        );\n      }\n    };\n\n    const sdk = createSdk(\n      addHooks(config, {\n        beforeRequest: beforeRequest(storagePrefix),\n        afterRequest,\n      }),\n    );\n\n    const wrappedSdk = wrapWith(\n      sdk,\n      ['logout', 'logoutAll', 'oidc.logout'],\n      wrapper(storagePrefix),\n    );\n\n    const refreshToken = () => getRefreshToken(storagePrefix);\n    const sessionToken = () => getSessionToken(storagePrefix);\n    const idToken = () => getIdToken(storagePrefix);\n\n    return Object.assign(wrappedSdk, {\n      getRefreshToken: refreshToken,\n      getSessionToken: sessionToken,\n      getIdToken: idToken,\n    }) as any;\n  };\n\nconst wrapper =\n  (prefix?: string): SdkFnWrapper<{}> =>\n  (fn) =>\n  async (...args) => {\n    const resp = await fn(...args);\n\n    clearTokens(prefix);\n\n    return resp;\n  };\n\nexport default withPersistTokens;\n","import { JWTResponse, SdkResponse, ResponseData } from '@descope/core-js-sdk';\nimport { IS_BROWSER } from '../constants';\nimport { CoreSdk, PasskeyOptions } from '../types';\n\ntype CreateWebauthn = typeof createWebAuthn;\n\nconst withCoreFns =\n  <I extends Parameters<CreateWebauthn>, O extends ReturnType<CreateWebauthn>>(\n    creator: (...args: I) => O,\n  ) =>\n  (...args: I) => {\n    const obj = creator(...args);\n\n    Object.assign(obj.signUp, args[0].webauthn.signUp);\n    Object.assign(obj.signIn, args[0].webauthn.signIn);\n    Object.assign(obj.signUpOrIn, args[0].webauthn.signUpOrIn);\n    Object.assign(obj.update, args[0].webauthn.update);\n\n    return obj as {\n      [K in keyof O]: K extends keyof I[0]['webauthn']\n        ? O[K] & I[0]['webauthn'][K]\n        : O[K];\n    };\n  };\n\n/** Constructs a higher level WebAuthn API that wraps the functions from code-js-sdk */\nconst createWebAuthn = (sdk: CoreSdk) => ({\n  async signUp(\n    identifier: string,\n    name: string,\n    passkeyOptions?: PasskeyOptions,\n  ) {\n    const startResponse = await sdk.webauthn.signUp.start(\n      identifier,\n      window.location.origin,\n      name,\n      passkeyOptions,\n    );\n    if (!startResponse.ok) {\n      return startResponse as unknown as SdkResponse<JWTResponse>;\n    }\n    const createResponse = await create(startResponse.data.options);\n    const finishResponse = await sdk.webauthn.signUp.finish(\n      startResponse.data.transactionId,\n      createResponse,\n    );\n    return finishResponse;\n  },\n\n  async signIn(identifier: string, passkeyOptions?: PasskeyOptions) {\n    const startResponse = await sdk.webauthn.signIn.start(\n      identifier,\n      window.location.origin,\n      undefined,\n      undefined,\n      passkeyOptions,\n    );\n    if (!startResponse.ok) {\n      return startResponse as unknown as SdkResponse<JWTResponse>;\n    }\n    const getResponse = await get(startResponse.data.options);\n    const finishResponse = await sdk.webauthn.signIn.finish(\n      startResponse.data.transactionId,\n      getResponse,\n    );\n    return finishResponse;\n  },\n\n  async signUpOrIn(identifier: string, passkeyOptions?: PasskeyOptions) {\n    const startResponse = await sdk.webauthn.signUpOrIn.start(\n      identifier,\n      window.location.origin,\n      passkeyOptions,\n    );\n    if (!startResponse.ok) {\n      return startResponse as unknown as SdkResponse<JWTResponse>;\n    }\n    if (startResponse.data?.create) {\n      const createResponse = await create(startResponse.data.options);\n      const finishResponse = await sdk.webauthn.signUp.finish(\n        startResponse.data.transactionId,\n        createResponse,\n      );\n      return finishResponse;\n    } else {\n      const getResponse = await get(startResponse.data.options);\n      const finishResponse = await sdk.webauthn.signIn.finish(\n        startResponse.data.transactionId,\n        getResponse,\n      );\n      return finishResponse;\n    }\n  },\n\n  async update(\n    identifier: string,\n    token?: string,\n    passkeyOptions?: PasskeyOptions,\n  ) {\n    const startResponse = await sdk.webauthn.update.start(\n      identifier,\n      window.location.origin,\n      token,\n      passkeyOptions,\n    );\n    if (!startResponse.ok) {\n      return startResponse as SdkResponse<ResponseData>;\n    }\n    const createResponse = await create(startResponse.data.options);\n    const finishResponse = await sdk.webauthn.update.finish(\n      startResponse.data.transactionId,\n      createResponse,\n    );\n    return finishResponse;\n  },\n\n  /** Helper functions for working with WebAuthn browser APIs using JSON data */\n  helpers: {\n    /** Wraps the navigation.credentials.create call to translate JSON inputs and outputs */\n    create,\n    /** Wraps the navigation.credentials.get call to translate JSON inputs and outputs */\n    get,\n    /** Checks if the browser supports WebAuthn, and can optionally require in\n     * addition that the browser supports WebAuthn with built-in biometrics */\n    isSupported,\n    conditional,\n  },\n});\n\n// Helpers functions\n\nasync function create(options: string): Promise<string> {\n  const createOptions = decodeCreateOptions(options);\n  const createResponse = (await navigator.credentials.create(\n    createOptions,\n  )) as AttestationPublicKeyCredential;\n  return encodeCreateResponse(createResponse);\n}\n\nasync function get(options: string): Promise<string> {\n  const getOptions = decodeGetOptions(options);\n  const getResponse = (await navigator.credentials.get(\n    getOptions,\n  )) as AssertionPublicKeyCredential;\n  return encodeGetResponse(getResponse);\n}\n\n/**\n * This function should be used in passkeys autofill (conditional UI)\n * It handles the call to \"navigator.credentials.get\" and adds the required options\n * @param options webauthn start options\n * @param abort: AbortController instance\n * @returns encoded \"navigator.credentials.get\" response\n */\nasync function conditional(\n  options: string,\n  abort: AbortController,\n): Promise<string> {\n  const getOptions = decodeGetOptions(options);\n  getOptions.signal = abort.signal;\n  getOptions.mediation = 'conditional' as any;\n  const getResponse = (await navigator.credentials.get(\n    getOptions,\n  )) as AssertionPublicKeyCredential;\n  return encodeGetResponse(getResponse);\n}\n\n// eslint-disable-next-line import/exports-last\nexport async function isSupported(\n  requirePlatformAuthenticator: boolean = false,\n): Promise<boolean> {\n  if (!IS_BROWSER) {\n    return Promise.resolve(false);\n  }\n  const supported = !!(\n    window.PublicKeyCredential &&\n    navigator.credentials &&\n    navigator.credentials.create &&\n    navigator.credentials.get\n  );\n  if (\n    supported &&\n    requirePlatformAuthenticator &&\n    PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable\n  ) {\n    return PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();\n  }\n  return supported;\n}\n\n// Conversion of data structures for Create/Attestation/Register ceremony\n\ntype AttestationPublicKeyCredential = PublicKeyCredential & {\n  response: AuthenticatorAttestationResponse;\n};\n\nfunction decodeCreateOptions(value: string): CredentialCreationOptions {\n  const options = JSON.parse(value);\n  options.publicKey.challenge = decodeBase64Url(options.publicKey.challenge);\n  options.publicKey.user.id = decodeBase64Url(options.publicKey.user.id);\n  options.publicKey.excludeCredentials?.forEach((item: any) => {\n    item.id = decodeBase64Url(item.id);\n  });\n  return options;\n}\n\nfunction encodeCreateResponse(\n  credential: AttestationPublicKeyCredential,\n): string {\n  return JSON.stringify({\n    id: credential.id,\n    rawId: encodeBase64Url(credential.rawId),\n    type: credential.type,\n    response: {\n      attestationObject: encodeBase64Url(credential.response.attestationObject),\n      clientDataJSON: encodeBase64Url(credential.response.clientDataJSON),\n    },\n  });\n}\n\n// Conversion of data structures for Get/Assertion/Login ceremony\n\ntype AssertionPublicKeyCredential = PublicKeyCredential & {\n  response: AuthenticatorAssertionResponse;\n};\n\nfunction decodeGetOptions(value: string): CredentialRequestOptions {\n  const options = JSON.parse(value);\n  options.publicKey.challenge = decodeBase64Url(options.publicKey.challenge);\n  options.publicKey.allowCredentials?.forEach((item: any) => {\n    item.id = decodeBase64Url(item.id);\n  });\n  return options;\n}\n\nfunction encodeGetResponse(credential: AssertionPublicKeyCredential): string {\n  return JSON.stringify({\n    id: credential.id,\n    rawId: encodeBase64Url(credential.rawId),\n    type: credential.type,\n    response: {\n      authenticatorData: encodeBase64Url(credential.response.authenticatorData),\n      clientDataJSON: encodeBase64Url(credential.response.clientDataJSON),\n      signature: encodeBase64Url(credential.response.signature),\n      userHandle: credential.response.userHandle\n        ? encodeBase64Url(credential.response.userHandle)\n        : undefined,\n    },\n  });\n}\n\n// Conversion between ArrayBuffers and Base64Url strings\n\nfunction decodeBase64Url(value: string): ArrayBufferLike {\n  const base64 = value.replace(/_/g, '/').replace(/-/g, '+');\n  return Uint8Array.from(atob(base64), (c) => c.charCodeAt(0)).buffer;\n}\n\nfunction encodeBase64Url(value: ArrayBufferLike): string {\n  const base64 = btoa(String.fromCharCode.apply(null, new Uint8Array(value)));\n  return base64.replace(/\\//g, '_').replace(/\\+/g, '-').replace(/=/g, '');\n}\n\n// Exports\nexport default withCoreFns(createWebAuthn);\n","export const apiPaths = {\n  fedcm: {\n    config: '/fedcm/config',\n  },\n};\n","import { JWTResponse, SdkResponse, LoginOptions } from '@descope/core-js-sdk';\nimport { CoreSdk } from '../types';\nimport { IS_BROWSER } from '../constants';\nimport { apiPaths } from '../apiPaths';\n\n/**\n * Configuration for OneTap.\n */\ninterface OneTapConfig {\n  /** Whether to auto select. Optional. */\n  auto_select?: boolean;\n\n  /** Whether to cancel on tap outside. Optional. */\n  cancel_on_tap_outside?: boolean;\n\n  /** ID of the prompt parent. Optional. */\n  prompt_parent_id?: string;\n\n  /** Context. Optional. */\n  context?: 'signin' | 'signup' | 'use';\n\n  /** Callback function to handle the intermediate iframe close event. Optional. */\n  intermediate_iframe_close_callback?: () => void;\n\n  /** Whether to support ITP. Optional. */\n  itp_support?: boolean;\n\n  /** Login hint. Optional. */\n  login_hint?: string;\n\n  /** HD. Optional. */\n  hd?: string;\n\n  /** Whether to use FedCM for prompt. Optional. */\n  use_fedcm_for_prompt?: boolean;\n}\n\n/**\n * Response from the credential.\n */\ninterface CredentialResponse {\n  /** Credential. */\n  credential: string;\n\n  /** How the selection was made. */\n  select_by:\n    | 'auto'\n    | 'user'\n    | 'user_1tap'\n    | 'user_2tap'\n    | 'btn'\n    | 'btn_confirm'\n    | 'btn_add_session'\n    | 'btn_confirm_add_session';\n}\n\ninterface FedCMAssertionResponse {\n  token: string;\n  error: {\n    code: string;\n    url: string;\n  };\n}\n\ninterface IdentityProviderConfig {\n  configURL: string;\n  clientId: string;\n}\n\ntype IdentityCredentialRequestOptionsContext =\n  | 'signin'\n  | 'signup'\n  | 'use'\n  | 'continue';\n\ninterface IdentityProviderRequestOptions extends IdentityProviderConfig {\n  nonce?: string;\n  loginHint?: string;\n  domainHint?: string;\n}\n\ninterface IdentityCredentialRequestOptions {\n  providers: IdentityProviderRequestOptions[];\n  context?: IdentityCredentialRequestOptionsContext;\n}\n\ninterface FedCMCredentialRequestOptions {\n  identity?: IdentityCredentialRequestOptions;\n}\n\ntype OneTapInitialize = ({\n  client_id,\n  callback,\n  nonce,\n}: {\n  client_id: string;\n  callback: (res: CredentialResponse) => void;\n  nonce: string;\n} & OneTapConfig) => void;\n\ntype PromptNotification = {\n  isSkippedMoment: () => boolean;\n  isDismissedMoment: () => boolean;\n  getDismissedReason: () => string;\n  getSkippedReason: () => string;\n};\n\nconst generateNonce = () => {\n  if (window.crypto && window.crypto.getRandomValues) {\n    const array = new Uint8Array(16); // 16 bytes = 128 bits\n    window.crypto.getRandomValues(array);\n    return Array.from(array, (byte) => byte.toString(16).padStart(2, '0')).join(\n      '',\n    );\n  } else {\n    // Fallback (not cryptographically secure)\n    return Math.random().toString(36).substring(2);\n  }\n};\n\n/**\n * Constructs a higher level FedCM API that wraps the functions from code-js-sdk.\n * @param sdk The CoreSdk instance.\n * @returns The FedCM API.\n */\nconst createFedCM = (sdk: CoreSdk, projectId: string) => ({\n  onetap: {\n    requestExchangeCode(options: {\n      provider?: string;\n      oneTapConfig?: OneTapConfig;\n      loginOptions?: LoginOptions;\n      onSkipped?: (reason?: string) => void;\n      onDismissed?: (reason?: string) => void;\n      onFailed?: (error: Error) => void;\n      onCodeReceived: (code: string) => void;\n    }) {\n      performOneTap(sdk, options);\n    },\n\n    requestAuthentication(options?: {\n      provider?: string;\n      oneTapConfig?: OneTapConfig;\n      loginOptions?: LoginOptions;\n      onSkipped?: (reason?: string) => void;\n      onDismissed?: (reason?: string) => void;\n      onFailed?: (error: Error) => void;\n      onAuthenticated?: (response: JWTResponse) => void;\n    }) {\n      performOneTap(sdk, options);\n    },\n  },\n\n  /**\n   * @deprecated Call `onetap.requestAuthentication` instead.\n   */\n  async oneTap(\n    provider?: string,\n    oneTapConfig?: OneTapConfig,\n    loginOptions?: LoginOptions,\n    onSkipped?: (reason?: string) => void,\n    onDismissed?: (reason?: string) => void,\n  ) {\n    await performOneTapAsync(sdk, {\n      provider,\n      oneTapConfig,\n      loginOptions,\n      onSkipped,\n      onDismissed,\n    });\n  },\n\n  async launch(\n    context?: IdentityCredentialRequestOptionsContext,\n  ): Promise<SdkResponse<JWTResponse>> {\n    const configURL = sdk.httpClient.buildUrl(\n      projectId + apiPaths.fedcm.config,\n    );\n    const req: FedCMCredentialRequestOptions = {\n      identity: {\n        context: context || 'signin',\n        providers: [\n          {\n            configURL,\n            clientId: projectId,\n          },\n        ],\n      },\n    };\n    const res = await navigator.credentials?.get(req as any);\n    return sdk.refresh((res as any as FedCMAssertionResponse).token);\n  },\n\n  isSupported(): boolean {\n    return IS_BROWSER && 'IdentityCredential' in window;\n  },\n\n  async isLoggedIn(\n    context?: IdentityCredentialRequestOptionsContext,\n  ): Promise<boolean> {\n    const configURL = sdk.httpClient.buildUrl(\n      projectId + apiPaths.fedcm.config,\n    );\n    try {\n      const req: FedCMCredentialRequestOptions = {\n        identity: {\n          context: context || 'signin',\n          providers: [\n            {\n              configURL,\n              clientId: projectId,\n            },\n          ],\n        },\n      };\n      const res = await navigator.credentials?.get(req as any);\n      return !!res && !!(res as any as FedCMAssertionResponse).token;\n    } catch (e) {\n      // Any error likely indicates no active session.\n      return false;\n    }\n  },\n});\n\n// Helpers functions\nasync function getGoogleClient(): Promise<{\n  initialize: OneTapInitialize;\n  prompt: (cb: (notification: PromptNotification) => void) => void;\n}> {\n  return new Promise((resolve, reject) => {\n    if ((window as any).google) {\n      resolve((window as any).google.accounts.id);\n      return;\n    }\n\n    /* istanbul ignore next */\n    let googleScript = document.getElementById(\n      'google-gsi-client-script',\n    ) as HTMLScriptElement;\n\n    /* istanbul ignore next */\n    if (!googleScript) {\n      googleScript = document.createElement('script');\n      document.head.appendChild(googleScript);\n      googleScript.async = true;\n      googleScript.defer = true;\n      googleScript.id = 'google-gsi-client-script';\n      googleScript.src = 'https://accounts.google.com/gsi/client';\n    }\n\n    /* istanbul ignore next */\n    googleScript.onload = function () {\n      if ((window as any).google) {\n        resolve((window as any).google.accounts.id);\n      } else {\n        reject('Failed to load Google GSI client script - not loaded properly');\n      }\n    };\n    /* istanbul ignore next */\n    googleScript.onerror = function () {\n      reject('Failed to load Google GSI client script - failed to load');\n    };\n  });\n}\n\nasync function performOneTap(\n  sdk: CoreSdk,\n  options?: {\n    provider?: string;\n    oneTapConfig?: OneTapConfig;\n    loginOptions?: LoginOptions;\n    onSkipped?: (reason?: string) => void;\n    onDismissed?: (reason?: string) => void;\n    onFailed?: (error: Error) => void;\n    onCodeReceived?: (code: string) => void;\n    onAuthenticated?: (response: JWTResponse) => void;\n  },\n) {\n  try {\n    await performOneTapAsync(sdk, options);\n  } catch (e) {\n    options?.onFailed?.(e);\n  }\n}\n\nasync function performOneTapAsync(\n  sdk: CoreSdk,\n  options?: {\n    provider?: string;\n    oneTapConfig?: OneTapConfig;\n    loginOptions?: LoginOptions;\n    onSkipped?: (reason?: string) => void;\n    onDismissed?: (reason?: string) => void;\n    onCodeReceived?: (code: string) => void;\n    onAuthenticated?: (response: JWTResponse) => void;\n  },\n) {\n  const auth = await startOneTap(\n    sdk,\n    options.provider,\n    options.oneTapConfig,\n    options.onSkipped,\n    options.onDismissed,\n  );\n  if (!auth.credential) {\n    return null;\n  }\n  if (options?.onCodeReceived) {\n    const response = await sdk.oauth.verifyOneTapIDToken(\n      auth.provider,\n      auth.credential,\n      auth.nonce,\n      options?.loginOptions,\n    );\n    if (!response.ok || !response.data) {\n      throw new Error(\n        'Failed to verify OneTap client ID for provider ' + auth.provider,\n      );\n    }\n    options?.onCodeReceived?.(response.data.code);\n  } else {\n    const response = await sdk.oauth.exchangeOneTapIDToken(\n      auth.provider,\n      auth.credential,\n      auth.nonce,\n      options?.loginOptions,\n    );\n    if (!response.ok || !response.data) {\n      throw new Error(\n        'Failed to exchange OneTap client ID for provider ' + auth.provider,\n      );\n    }\n    options?.onAuthenticated?.(response.data);\n  }\n}\n\nasync function startOneTap(\n  sdk: CoreSdk,\n  provider: string = 'google',\n  oneTapConfig?: OneTapConfig,\n  onSkipped?: (reason?: string) => void,\n  onDismissed?: (reason?: string) => void,\n): Promise<{\n  provider: string;\n  nonce: string;\n  credential?: string;\n}> {\n  const nonce = generateNonce();\n  const googleClient = await getGoogleClient();\n\n  const clientIdRes = await sdk.oauth.getOneTapClientId(provider);\n  if (!clientIdRes.ok) {\n    throw new Error('Failed to get OneTap client ID for provider ' + provider);\n  }\n  const clientId = clientIdRes.data.clientId;\n\n  return new Promise((resolve) => {\n    const callback = (response?: CredentialResponse) => {\n      resolve({\n        provider,\n        nonce,\n        credential: response?.credential,\n      });\n    };\n\n    googleClient.initialize({\n      ...oneTapConfig,\n      itp_support: oneTapConfig?.itp_support ?? true,\n      use_fedcm_for_prompt: oneTapConfig?.use_fedcm_for_prompt ?? true,\n      client_id: clientId,\n      callback,\n      nonce,\n    });\n\n    googleClient.prompt((notification) => {\n      if (onDismissed && notification?.isDismissedMoment()) {\n        const reason = notification.getDismissedReason?.();\n        onDismissed?.(reason);\n        callback();\n        return;\n      }\n\n      if (onSkipped && notification?.isSkippedMoment()) {\n        const reason = notification.getSkippedReason?.();\n        onSkipped?.(reason);\n        callback();\n        return;\n      }\n    });\n  });\n}\n\nexport default createFedCM;\nexport type { OneTapConfig };\n","import { CoreSdk, ReplaceParam } from '../types';\nimport { isSupported } from './webauthn';\n\ntype CoreSdkFlowStartArgs = Parameters<CoreSdk['flow']['start']>;\ntype Options = Pick<\n  CoreSdkFlowStartArgs[1],\n  | 'tenant'\n  | 'redirectUrl'\n  | 'redirectAuth'\n  | 'oidcIdpStateId'\n  | 'samlIdpStateId'\n  | 'samlIdpUsername'\n  | 'ssoAppId'\n  | 'thirdPartyAppId'\n  | 'oidcLoginHint'\n  | 'preview'\n  | 'abTestingKey'\n  | 'client'\n  | 'locale'\n  | 'oidcPrompt'\n  | 'oidcErrorRedirectUri'\n  | 'oidcResource'\n  | 'nativeOptions'\n  | 'thirdPartyAppStateId'\n  | 'applicationScopes'\n  | 'outboundAppId'\n  | 'outboundAppScopes'\n> & {\n  lastAuth?: Omit<CoreSdkFlowStartArgs[1]['lastAuth'], 'loginId' | 'name'>;\n};\n\nconst START_OPTIONS_VERSION_PREFER_START_REDIRECT_URL = 1;\n\nexport default (coreSdk: CoreSdk) => ({\n  ...coreSdk.flow,\n  // wrap start fn and adds more data to the start options\n  start: async (...args: ReplaceParam<CoreSdkFlowStartArgs, '1', Options>) => {\n    const webAuthnSupport = await isSupported();\n    const decoratedOptions = {\n      location: window.location.href,\n      ...args[1],\n      deviceInfo: {\n        webAuthnSupport,\n      },\n      startOptionsVersion: START_OPTIONS_VERSION_PREFER_START_REDIRECT_URL,\n    };\n\n    args[1] = decoratedOptions;\n\n    return coreSdk.flow.start(...args);\n  },\n});\n","import { RequestConfig, SdkResponse, URLResponse } from '@descope/core-js-sdk';\nimport type {\n  CreateSigninRequestArgs,\n  CreateSignoutRequestArgs,\n  OidcClient,\n  OidcClientSettings,\n  SigninResponse,\n  WebStorageStateStore,\n} from 'oidc-client-ts';\nimport {\n  OIDC_CLIENT_TS_DESCOPE_CDN_URL,\n  OIDC_CLIENT_TS_JSDELIVR_CDN_URL,\n} from '../../constants';\nimport { getIdToken } from '../../enhancers/withPersistTokens/helpers';\nimport { CoreSdk, OidcConfig, OidcConfigOptions } from '../../types';\nimport { hasOidcParamsInUrl, removeOidcParamFromUrl } from './helpers';\n\ntype OidcModule = {\n  OidcClient: typeof OidcClient;\n  WebStorageStateStore: typeof WebStorageStateStore;\n};\n\ntype SignInResponseStorage = Pick<\n  SigninResponse,\n  'id_token' | 'session_state' | 'profile'\n>;\n\nlet scriptLoadingPromise: Promise<OidcModule>;\n\n/* istanbul ignore next */\nconst simpleHash = (input: string): string => {\n  let hash = 0;\n\n  for (let i = 0; i < input.length; i++) {\n    const char = input.charCodeAt(i);\n    hash = (hash << 5) - hash + char;\n    hash = hash & hash; // Convert to 32-bit integer\n  }\n\n  return Math.abs(hash).toString(16); // Return hash as a positive hexadecimal string\n};\n\nconst loadScriptWithFallback = (\n  urls: string[],\n  getEntry: () => OidcModule,\n): Promise<OidcModule> => {\n  /* istanbul ignore next */\n  return new Promise((resolve, reject) => {\n    if (!urls.length)\n      return reject(new Error('No URLs provided to loadScriptWithFallback'));\n\n    const entry = getEntry();\n    if (entry) return resolve(entry);\n\n    const url = urls.shift();\n\n    const scriptEle = document.createElement('script');\n    scriptEle.src = url;\n    scriptEle.id = simpleHash(url);\n    scriptEle.onload = () => {\n      const entry = getEntry();\n      if (entry) return resolve(entry);\n      throw new Error('Could not get entry after loading script from URL');\n    };\n    /* istanbul ignore next */\n    scriptEle.addEventListener('error', () => {\n      loadScriptWithFallback(urls, getEntry);\n      scriptEle.setAttribute('data-error', 'true');\n    });\n    document.body.appendChild(scriptEle);\n  });\n};\n\nconst loadOIDCModule = async (): Promise<OidcModule> => {\n  /* istanbul ignore next */\n  try {\n    return require('oidc-client-ts');\n  } catch (e) {\n    return loadScriptWithFallback(\n      [OIDC_CLIENT_TS_DESCOPE_CDN_URL, OIDC_CLIENT_TS_JSDELIVR_CDN_URL],\n      () => window['oidc'],\n    );\n  }\n};\n\nfunction oidcSignInResToStorage(\n  signInRes: SigninResponse,\n): SignInResponseStorage {\n  return {\n    id_token: signInRes.id_token,\n    session_state: signInRes.session_state,\n    profile: signInRes.profile,\n  };\n}\n\nconst getUserFromStorage = (\n  stateUserKey: string,\n): SignInResponseStorage | null => {\n  const user = window.localStorage.getItem(stateUserKey);\n  return user ? JSON.parse(user) : null;\n};\n\nconst getOidcClient = async (\n  sdk: CoreSdk,\n  projectId: string,\n  oidcConfig?: OidcConfigOptions,\n) => {\n  if (!scriptLoadingPromise) {\n    scriptLoadingPromise = loadOIDCModule();\n  }\n  const { OidcClient, WebStorageStateStore } = await scriptLoadingPromise;\n\n  if (!OidcClient) {\n    throw new Error(\n      'oidc-client-ts is not installed. Please install it by running `npm install oidc-client-ts`',\n    );\n  }\n\n  const clientId = projectId;\n  const redirectUri = oidcConfig?.redirectUri || window.location.href;\n  const scope =\n    oidcConfig?.scope ||\n    'openid email roles descope.custom_claims offline_access';\n  const stateUserKey = `${clientId}_user`;\n\n  let authority = sdk.httpClient.buildUrl(projectId);\n  if (oidcConfig?.applicationId) {\n    // append the applicationId to the authority\n    authority = `${authority}/${oidcConfig.applicationId}`;\n  }\n\n  const settings: OidcClientSettings = {\n    authority,\n    client_id: projectId,\n    redirect_uri: redirectUri,\n    response_type: 'code',\n    scope,\n    stateStore: new WebStorageStateStore({\n      store: window.localStorage,\n      prefix: clientId,\n    }),\n    loadUserInfo: true,\n    fetchRequestCredentials: 'same-origin',\n  };\n\n  if (oidcConfig?.redirectUri) {\n    settings.redirect_uri = oidcConfig.redirectUri;\n  }\n  if (oidcConfig?.scope) {\n    settings.scope = oidcConfig.scope;\n  }\n  return {\n    client: new OidcClient(settings),\n    stateUserKey,\n  };\n};\n\nconst createOidc = (\n  sdk: CoreSdk,\n  projectId: string,\n  oidcConfig?: OidcConfig,\n) => {\n  const getCachedClient = async (): Promise<{\n    client: OidcClient;\n    stateUserKey: string;\n  }> => {\n    let client, stateUserKey;\n    if (!client || !stateUserKey) {\n      ({ client, stateUserKey } = await getOidcClient(\n        sdk,\n        projectId,\n        oidcConfig as OidcConfigOptions,\n      ));\n    }\n    return { client, stateUserKey };\n  };\n\n  // Start the login process by creating a signin request\n  // And redirecting the user to the returned URL\n  const loginWithRedirect = async (\n    arg: CreateSigninRequestArgs = {},\n    disableNavigation: boolean = false,\n  ): Promise<SdkResponse<URLResponse>> => {\n    const { client } = await getCachedClient();\n    const res = await client.createSigninRequest(arg);\n    const { url } = res;\n    if (!disableNavigation) {\n      window.location.href = url;\n    }\n    return { ok: true, data: res };\n  };\n\n  // Finish the login process by processing the signin response\n  // This function should be called after the user is redirected from the OIDC IdP\n  const finishLogin = async (url: string = ''): Promise<any> => {\n    const { client, stateUserKey } = await getCachedClient();\n    const res = await client.processSigninResponse(url || window.location.href);\n\n    // In order to make sure all the after-hooks are running with the success response\n    // we are generating a fake response with the success data and calling the http client after hook fn with it\n    await sdk.httpClient.hooks?.afterRequest(\n      {} as any,\n      new Response(JSON.stringify(res)),\n    );\n\n    window.localStorage.setItem(\n      stateUserKey,\n      JSON.stringify(oidcSignInResToStorage(res)),\n    );\n    // remove the code from the URL\n    removeOidcParamFromUrl();\n\n    return res;\n  };\n\n  // Finish the login process if the OIDC params are in the URL, if not, do nothing\n  // This function should be called after the user is redirected\n  // Note: high level SDKs may call this function to check if the user is in the middle of the login process\n  const finishLoginIfNeed = async (url: string = ''): Promise<any> => {\n    if (hasOidcParamsInUrl()) {\n      return await finishLogin(url);\n    }\n  };\n\n  // Start the logout process by creating a signout request\n  // And redirecting the user to the returned URL\n  const logout = async (\n    arg?: CreateSignoutRequestArgs,\n    disableNavigation: boolean = false,\n  ): Promise<any> => {\n    const { client, stateUserKey } = await getCachedClient();\n    if (!arg) {\n      arg = {};\n    }\n\n    // if id_token_hint is not provided, we will use the one from the storage\n    arg.id_token_hint = arg.id_token_hint || getIdToken();\n    arg.post_logout_redirect_uri =\n      arg.post_logout_redirect_uri || window.location.href;\n\n    const res = await client.createSignoutRequest(arg);\n    const { url } = res;\n    window.localStorage.removeItem(stateUserKey);\n    if (!disableNavigation) {\n      window.location.replace(url);\n    }\n    return res;\n  };\n\n  // Refresh the access token using the refresh token\n  const refreshToken = async (refreshToken: string) => {\n    const { client, stateUserKey } = await getCachedClient();\n\n    const user = getUserFromStorage(stateUserKey);\n    if (!user) {\n      throw new Error('User not found in storage to refresh token');\n    }\n\n    let refresh_token = refreshToken;\n    if (!refresh_token) {\n      // if refresh token is not provided, we will use the one from the hooks\n      const config = {} as RequestConfig;\n      sdk.httpClient.hooks.beforeRequest(config);\n      refresh_token = config.token;\n    }\n    const res = await client.useRefreshToken({\n      state: {\n        refresh_token,\n        session_state: user.session_state,\n        profile: user.profile,\n      },\n    });\n\n    // In order to make sure all the after-hooks are running with the success response\n    // we are generating a fake response with the success data and calling the http client after hook fn with it\n    await sdk.httpClient.hooks?.afterRequest(\n      {} as any,\n      new Response(JSON.stringify(res)),\n    );\n    return res;\n  };\n\n  return {\n    loginWithRedirect,\n    finishLogin,\n    finishLoginIfNeed,\n    refreshToken,\n    logout,\n  };\n};\n\nexport default createOidc;\nexport type { OidcConfig };\n","export const hasOidcParamsInUrl = () => {\n  return (\n    window.location.search.includes('code') &&\n    window.location.search.includes('state')\n  );\n};\n\nexport const removeOidcParamFromUrl = () => {\n  // Retrieve the current URL from the browser's address bar\n  const currentUrl = new URL(window.location.href);\n\n  // Remove the 'code' and 'state' query parameters if it exist\n  currentUrl.searchParams.delete('code');\n  currentUrl.searchParams.delete('state');\n\n  // Update the URL displayed in the browser without reloading the page\n  window.history.replaceState({}, document.title, currentUrl.toString());\n};\n","import { compose } from './enhancers/helpers';\nimport { withAnalytics } from './enhancers/withAnalytics';\nimport { withAutoRefresh } from './enhancers/withAutoRefresh';\nimport { withFingerprint } from './enhancers/withFingerprint';\nimport { withFlowNonce } from './enhancers/withFlowNonce';\nimport { withLastLoggedInUser } from './enhancers/withLastLoggedInUser';\nimport { withNotifications } from './enhancers/withNotifications';\nimport withPersistTokens from './enhancers/withPersistTokens';\nimport createSdk from './sdk';\n\nconst decoratedCreateSdk = compose(\n  withFingerprint,\n  withAutoRefresh,\n  withAnalytics,\n  withNotifications,\n  withFlowNonce,\n  withLastLoggedInUser, // must be one before last due to TS types\n  withPersistTokens, // must be last due to TS known limitation https://github.com/microsoft/TypeScript/issues/30727\n)(createSdk);\n\nexport type { UserResponse, OidcConfig } from './types';\n\n// Note: make sure to update ./test/umd.test.ts when adding new constants\nexport {\n  REFRESH_TOKEN_KEY,\n  SESSION_TOKEN_KEY,\n} from './enhancers/withPersistTokens/constants';\n\nexport {\n  ensureFingerprintIds,\n  clearFingerprintData,\n} from './enhancers/withFingerprint/helpers';\n\nexport { hasOidcParamsInUrl } from './sdk/oidc/helpers';\n\nexport type { OneTapConfig } from './sdk/fedcm';\nexport type { CookieConfig } from './enhancers/withPersistTokens/types';\nexport type { FlowNonceOptions } from './enhancers/withFlowNonce/types';\nexport default decoratedCreateSdk;\n","type Fn = (arg: any) => any;\n\nexport function compose<Input, A1>(\n  fn1: (input: Input) => A1,\n): (input: Input) => A1;\n\nexport function compose<Input, A1, A2>(\n  fn1: (input: Input) => A1,\n  fn2: (input: A1) => A2,\n): (input: Input) => A2;\n\nexport function compose<Input, A1, A2, A3>(\n  fn1: (input: Input) => A1,\n  fn2: (input: A1) => A2,\n  fn3: (input: A2) => A3,\n): (input: Input) => A3;\n\nexport function compose<Input, A1, A2, A3, A4>(\n  fn1: (input: Input) => A1,\n  fn2: (input: A1) => A2,\n  fn3: (input: A2) => A3,\n  fn4: (input: A3) => A4,\n): (input: Input) => A4;\n\nexport function compose<Input, A1, A2, A3, A4, A5>(\n  fn1: (input: Input) => A1,\n  fn2: (input: A1) => A2,\n  fn3: (input: A2) => A3,\n  fn4: (input: A3) => A4,\n  fn5: (input: A4) => A5,\n): (input: Input) => A5;\n\nexport function compose<Input, A1, A2, A3, A4, A5, A6>(\n  fn1: (input: Input) => A1,\n  fn2: (input: A1) => A2,\n  fn3: (input: A2) => A3,\n  fn4: (input: A3) => A4,\n  fn5: (input: A4) => A5,\n  fn6: (input: A5) => A6,\n): (input: Input) => A6;\n\nexport function compose<Input, A1, A2, A3, A4, A5, A6, A7>(\n  fn1: (input: Input) => A1,\n  fn2: (input: A1) => A2,\n  fn3: (input: A2) => A3,\n  fn4: (input: A3) => A4,\n  fn5: (input: A4) => A5,\n  fn6: (input: A5) => A6,\n  fn7: (input: A6) => A7,\n): (input: Input) => A7;\n\nexport function compose<Input, A1, A2, A3, A4, A5, A6, A7, A8>(\n  fn1: (input: Input) => A1,\n  fn2: (input: A1) => A2,\n  fn3: (input: A2) => A3,\n  fn4: (input: A3) => A4,\n  fn5: (input: A4) => A5,\n  fn6: (input: A5) => A6,\n  fn7: (input: A6) => A7,\n  fn8: (input: A7) => A8,\n): (input: Input) => A8;\n\nexport function compose<Input, A1, A2, A3, A4, A5, A6, A7, A8, A9>(\n  fn1: (input: Input) => A1,\n  fn2: (input: A1) => A2,\n  fn3: (input: A2) => A3,\n  fn4: (input: A3) => A4,\n  fn5: (input: A4) => A5,\n  fn6: (input: A5) => A6,\n  fn7: (input: A6) => A7,\n  fn8: (input: A7) => A8,\n  fn9: (input: A8) => A9,\n): (input: Input) => A9;\n\nexport function compose<Input, A1, A2, A3, A4, A5, A6, A7, A8, A9, A10>(\n  fn1: (input: Input) => A1,\n  fn2: (input: A1) => A2,\n  fn3: (input: A2) => A3,\n  fn4: (input: A3) => A4,\n  fn5: (input: A4) => A5,\n  fn6: (input: A5) => A6,\n  fn7: (input: A6) => A7,\n  fn8: (input: A7) => A8,\n  fn9: (input: A8) => A9,\n  fn10: (input: A9) => A10,\n): (input: Input) => A10;\n\n/**\n * Currently there is no way to create a compose function in Typescript without using overloading\n * This function currently support up to 10 wrappers\n * If needed you can add more by duplicating the type and add more parameters\n */\n\nexport function compose(...args: Fn[]) {\n  return (data: any) => args.reduce((acc, elem) => elem(acc), data) as any;\n}\n","import { SdkFnWrapper, wrapWith } from '@descope/core-js-sdk';\nimport { CreateWebSdk } from '../../sdk';\nimport { AfterRequestHook } from '../../types';\nimport { addHooks, getAuthInfoFromResponse, isDescopeBridge } from '../helpers';\nimport {\n  createTimerFunctions,\n  getTokenExpiration,\n  getAutoRefreshTimeout,\n} from './helpers';\nimport { AutoRefreshOptions } from './types';\nimport logger from '../helpers/logger';\nimport { IS_BROWSER, REFRESH_THRESHOLD } from '../../constants';\nimport { getRefreshToken } from '../withPersistTokens/helpers';\n\n/**\n * Automatically refresh the session token before it expires\n * It uses the the refresh token that is extracted from API response to do that\n */\nexport const withAutoRefresh =\n  <T extends CreateWebSdk>(createSdk: T) =>\n  ({ autoRefresh, ...config }: Parameters<T>[0] & AutoRefreshOptions) => {\n    if (!autoRefresh || isDescopeBridge()) return createSdk(config);\n\n    // if we hold a single timer id, there might be a case where we override it before canceling the timer, this might cause many calls to refresh\n    // in order to prevent it, we hold a list of timers and cancel all of them when a new timer is set, which means we should have one active timer only at a time\n    const { clearAllTimers, setTimer } = createTimerFunctions();\n\n    // we need to hold the expiration time and the refresh token in order to refresh the session\n    // when the user comes back to the tab or from background/lock screen/etc.\n    let sessionExpirationDate: Date;\n    let refreshToken: string;\n    if (IS_BROWSER) {\n      document.addEventListener('visibilitychange', () => {\n        // tab becomes visible and the session is expired, do a refresh\n        if (\n          document.visibilityState === 'visible' &&\n          sessionExpirationDate &&\n          new Date() > sessionExpirationDate\n        ) {\n          logger.debug('Expiration time passed, refreshing session');\n          // We prefer the persisted refresh token over the one from the response\n          // for a case that the token was refreshed from another tab, this mostly relevant\n          // when the project uses token rotation\n          sdk.refresh(getRefreshToken() || refreshToken);\n        }\n      });\n    }\n\n    const afterRequest: AfterRequestHook = async (_req, res) => {\n      const { sessionJwt, refreshJwt, sessionExpiration } =\n        await getAuthInfoFromResponse(res);\n\n      // if we got 401 we want to cancel all timers\n      if (res?.status === 401) {\n        logger.debug('Received 401, canceling all timers');\n        clearAllTimers();\n      } else if (sessionJwt || sessionExpiration) {\n        sessionExpirationDate = getTokenExpiration(\n          sessionJwt,\n          sessionExpiration,\n        );\n        if (!sessionExpirationDate) {\n          logger.debug('Could not extract expiration time from session token');\n          return;\n        }\n        refreshToken = refreshJwt;\n        const timeout = getAutoRefreshTimeout(sessionExpirationDate);\n        clearAllTimers();\n\n        if (timeout <= REFRESH_THRESHOLD) {\n          /*\n            When receiving a session with very short expiration - it means that the refresh token is also close to expiration\n            This happens because session expiration cannot be more than the refresh expiration\n            In this case - the user is going to be logged out soon, so we don't want to set a refresh timer\n          */\n          logger.debug(\n            'Session is too close to expiration, not setting refresh timer',\n          );\n          return;\n        }\n\n        const refreshTimeStr = new Date(\n          Date.now() + timeout,\n        ).toLocaleTimeString('en-US', { hour12: false });\n        logger.debug(\n          `Setting refresh timer for ${refreshTimeStr}. (${timeout}ms)`,\n        );\n\n        setTimer(() => {\n          logger.debug('Refreshing session due to timer');\n          // We prefer the persisted refresh token over the one from the response\n          // for a case that the token was refreshed from another tab, this mostly relevant\n          // when the project uses token rotation\n          sdk.refresh(getRefreshToken() || refreshJwt);\n        }, timeout);\n      }\n    };\n\n    const sdk = createSdk(addHooks(config, { afterRequest }));\n\n    const wrapper: SdkFnWrapper<{}> =\n      (fn) =>\n      async (...args) => {\n        const resp = await fn(...args);\n        logger.debug('Clearing all timers');\n        clearAllTimers();\n\n        return resp;\n      };\n\n    return wrapWith(sdk, ['logout', 'logoutAll', 'oidc.logout'], wrapper);\n  };\n","import { CreateWebSdk } from '../sdk';\nimport { BeforeRequestHook } from '../types';\nimport { addHooks } from './helpers';\n\n// this is replaced in build time\ndeclare const BUILD_VERSION: string;\n/**\n * Adds analytics headers to requests\n */\nexport const withAnalytics =\n  <T extends CreateWebSdk>(createSdk: T) =>\n  (config: Parameters<T>[0]) =>\n    createSdk({\n      ...config,\n      baseHeaders: {\n        'x-descope-sdk-name': 'web-js',\n        'x-descope-sdk-version': BUILD_VERSION,\n        ...config.baseHeaders,\n      },\n    });\n","import { CreateWebSdk } from '../../sdk';\nimport { AfterRequestHook, BeforeRequestHook } from '../../types';\nimport { addHooks } from '../helpers';\nimport {\n  FLOW_NEXT_PATH,\n  FLOW_NONCE_HEADER,\n  FLOW_NONCE_PREFIX,\n  FLOW_START_PATH,\n} from './constants';\nimport {\n  cleanupExpiredNonces,\n  extractFlowNonce,\n  getExecutionIdFromRequest,\n  getFlowNonce,\n  setFlowNonce,\n} from './helpers';\nimport { FlowNonceOptions } from './types';\n\n/**\n * Adds flow nonce handling to the SDK\n */\nexport const withFlowNonce =\n  <T extends CreateWebSdk>(createSdk: T) =>\n  (config: Parameters<T>[0] & FlowNonceOptions): ReturnType<T> => {\n    const {\n      enableFlowNonce = true,\n      nonceStoragePrefix = FLOW_NONCE_PREFIX,\n      ...sdkConfig\n    } = config;\n\n    if (!enableFlowNonce) {\n      return createSdk(sdkConfig) as ReturnType<T>;\n    }\n\n    cleanupExpiredNonces(nonceStoragePrefix);\n\n    const afterRequest: AfterRequestHook = async (req, res) => {\n      if (req.path !== FLOW_START_PATH && req.path !== FLOW_NEXT_PATH) {\n        return;\n      }\n      const { nonce, executionId } = await extractFlowNonce(req, res);\n\n      if (nonce && executionId) {\n        const isStart = req.path === FLOW_START_PATH;\n        setFlowNonce(executionId, nonce, isStart, nonceStoragePrefix);\n      }\n    };\n\n    const beforeRequest: BeforeRequestHook = (req) => {\n      if (req.path === FLOW_NEXT_PATH) {\n        const executionId = getExecutionIdFromRequest(req);\n\n        if (executionId) {\n          const nonce = getFlowNonce(executionId, nonceStoragePrefix);\n          if (nonce) {\n            req.headers = req.headers || {};\n            req.headers[FLOW_NONCE_HEADER] = nonce;\n          }\n        }\n      }\n      return req;\n    };\n\n    return createSdk(\n      addHooks(sdkConfig, { afterRequest, beforeRequest }),\n    ) as ReturnType<T>;\n  };\n\nexport * from './helpers';\nexport * from './types';\nexport * from './constants';\n","import createCoreSdk, { SdkResponse } from '@descope/core-js-sdk';\nimport createWebAuthn from './webauthn';\nimport createFedCM from './fedcm';\nimport withFlow from './flow';\nimport {\n  getSessionToken,\n  getRefreshToken,\n} from '../enhancers/withPersistTokens/helpers';\nimport createOidc from './oidc';\nimport { CoreSdk, WebSdkConfig } from '../types';\nimport { OIDC_LOGOUT_ERROR_CODE, OIDC_REFRESH_ERROR_CODE } from '../constants';\nimport logger from '../enhancers/helpers/logger';\n\nconst createSdk = (config: WebSdkConfig) => {\n  const coreSdk = createCoreSdk(config);\n\n  const oidc = createOidc(coreSdk, config.projectId, config.oidcConfig);\n\n  return {\n    ...coreSdk,\n    refresh: async (\n      token?: string,\n      tryRefresh?: boolean,\n    ): ReturnType<CoreSdk['refresh']> => {\n      if (config.oidcConfig) {\n        try {\n          await oidc.refreshToken(token);\n          return Promise.resolve({ ok: true });\n        } catch (error) {\n          return Promise.resolve({\n            ok: false,\n            error: {\n              errorCode: OIDC_REFRESH_ERROR_CODE,\n              errorDescription: error.toString(),\n            },\n          });\n        }\n      }\n      // Descope use this query param to monitor if refresh is made\n      // When the user is already logged in in the past or not (We want to optimize that in the future)\n      const currentSessionToken = getSessionToken();\n      const currentRefreshToken = getRefreshToken();\n\n      let externalToken = '';\n      if (config.getExternalToken) {\n        try {\n          externalToken = await config.getExternalToken?.();\n        } catch (error) {\n          logger.debug('Error getting external token while refreshing', error);\n          // continue without external token\n        }\n      }\n\n      return coreSdk.refresh(\n        token,\n        {\n          dcs: currentSessionToken ? 't' : 'f',\n          dcr: currentRefreshToken ? 't' : 'f',\n        },\n        externalToken,\n        tryRefresh,\n      );\n    },\n    // Call the logout function according to the oidcConfig\n    // And return the response in the same format\n    logout: async (token?: string): Promise<SdkResponse<never>> => {\n      if (config.oidcConfig) {\n        // logout is made with id_token_hint\n        try {\n          await oidc.logout({ id_token_hint: token });\n          return Promise.resolve({ ok: true });\n        } catch (error) {\n          return Promise.resolve({\n            ok: false,\n            error: {\n              errorCode: OIDC_LOGOUT_ERROR_CODE,\n              errorDescription: error.toString(),\n            },\n          });\n        }\n      }\n      return coreSdk.logout(token);\n    },\n    flow: withFlow(coreSdk),\n    webauthn: createWebAuthn(coreSdk),\n    fedcm: createFedCM(coreSdk, config.projectId),\n    oidc,\n  };\n};\n\nexport default createSdk;\n\nexport type CreateWebSdk = typeof createSdk;\nexport type WebSdk = ReturnType<CreateWebSdk>;\n","import sdk, { REFRESH_TOKEN_KEY, SESSION_TOKEN_KEY } from './index';\n\n// We export the tokens constant in this way so that umd bundles will have the constants as properties of the default export\n// But still can use the default export as a function (e.g. Descope({ projectId: 'pid'}))\nsdk['REFRESH_TOKEN_KEY'] = REFRESH_TOKEN_KEY;\nsdk['SESSION_TOKEN_KEY'] = SESSION_TOKEN_KEY;\n\nexport default sdk;\n"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","SuppressedError","InvalidTokenError","Error","base64UrlDecode","str","output","replace","decodeURIComponent","atob","m","code","charCodeAt","toString","toUpperCase","b64DecodeUnicode","err","jwtDecode","token","options","pos","header","part","split","decoded","message","JSON","parse","name","getExpirationFromToken","exp","oidcRefreshTokenExpiration","response","refresh_expire_in","refresh_token","Math","floor","Date","now","oidcAccessTokenExpiration","expires_in","expires_at","access_token","addHooks","config","hooks","reduce","acc","key","concat","_a","getAuthInfoFromResponse","async","res","ok","body","clone","json","id_token","rest","sessionJwt","idToken","refreshJwt","sessionExpiration","cookieExpiration","normalizeWebJWTResponseToJWTResponse","authInfo","getUserFromResponse","user","undefined","isLocalStorage","localStorage","setLocalStorage","value","setItem","getLocalStorage","getItem","removeLocalStorage","removeItem","accessKey","exchange","otp","verify","signIn","signUp","update","email","phone","signUpOrIn","magicLink","enchantedLink","session","oauth","start","startNative","finishNative","oneTap","getOneTapClientId","exchangeOneTapIDToken","verifyOneTapIDToken","outbound","connect","saml","totp","notp","webauthn","finish","password","sendReset","policy","refresh","tryRefresh","selectTenant","logout","logoutAll","me","myTenants","history","flow","next","o","a","r","headers","entries","fromEntries","Headers","stringify","Body","url","Url","method","Method","title","Title","status","Status","retries","Retries","build","keys","flatMap","join","l","includes","text","Promise","resolve","u","c","getUTCFullYear","getUTCMonth","padStart","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","random","g","get","delete","post","put","patch","h","path","baseUrl","queryParams","projectId","slice","forEach","encodeURIComponent","v","Array","isArray","from","f","Authorization","k","I","b","baseConfig","refreshCookieName","logger","cookiePolicy","fetch","warn","log","statusText","d","beforeRequest","y","O","w","baseHeaders","credentials","j","afterRequest","transformResponse","trim","cookies","buildUrl","allSettled","map","error","reason","tenants","getTime","U","T","R","x","P","data","retryAfter","Number","parseInt","$","q","S","filter","C","validate","A","test","L","E","N","D","H","z","_","F","K","V","Y","Z","B","Q","G","W","X","ee","te","loginOptions","ne","shift","oe","pollingIntervalMs","timeoutMs","max","min","se","ie","sms","voice","whatsapp","ae","re","waiting","running","completed","failed","pe","le","de","ue","ce","ge","loginId","URI","waitForSession","setInterval","pendingRef","clearInterval","clearTimeout","setTimeout","errorDescription","errorCode","he","ve","fe","flowId","conditionInteractionId","interactionId","componentsVersion","flowVersions","input","executionId","stepId","version","ke","Ie","be","ye","Oe","we","je","facebook","github","google","microsoft","gitlab","apple","discord","linkedin","slack","Ue","Te","provider","redirectURL","loginHint","implicit","stateId","nonce","Re","xe","Pe","tenantId","tenantLevel","appId","$e","qe","Se","Ce","Ae","Le","Ee","Me","Ne","tenant","ssoId","forceAuthn","De","He","Je","ze","_e","Fe","Ke","Ve","Ye","Ze","Be","Qe","redirectUrl","templateOptions","newPassword","oldPassword","Ge","We","Xe","et","tt","nt","ot","st","it","origin","passkeyOptions","transactionId","at","rt","pt","lt","dt","ut","gt","ht","String","M","externalToken","dct","ids","isJwtExpired","getTenants","getJwtPermissions","getJwtRoles","getCurrentTenant","httpClient","vt","DeliveryMethods","args","console","debug","OIDC_CLIENT_TS_VERSION","IS_BROWSER","window","MAX_TIMEOUT","pow","OIDC_CLIENT_TS_DESCOPE_CDN_URL","OIDC_CLIENT_TS_JSDELIVR_CDN_URL","getAutoRefreshTimeout","timeout","date","target","source","api","init","converter","defaultAttributes","set","attributes","document","expires","toUTCString","escape","stringifiedAttributes","attributeName","cookie","write","create","jar","parts","found","read","remove","withAttributes","withConverter","freeze","SESSION_TOKEN_KEY","REFRESH_TOKEN_KEY","ID_TOKEN_KEY","setJwtTokenCookie","cookieDomain","cookiePath","cookieSameSite","cookieSecure","domainMatches","currentDomainParts","location","hostname","cookieDomainParts","isCurrentDomainOrParentDomain","Cookies","domain","sameSite","secure","getRefreshToken","prefix","getSessionToken","getIdToken","clearTokens","FP_EP_URL","VISITOR_SESSION_ID_PARAM","VISITOR_REQUEST_ID_PARAM","default","to","pack","ar","current","postpone","push","exclude","Set","has","add","reject","TypeError","startedAt","finishedAt","then","catch","scriptUrlPattern","apiKey","time","state","visibilityState","addEventListener","removeEventListener","load","ldi","attempts","visibilityStates","URL","href","blockedURI","protocol","MessageChannel","port1","onmessage","port2","postMessage","createElement","parentNode","removeChild","head","getElementsByTagName","onload","onerror","src","appendChild","getOwnPropertyDescriptor","configurable","writable","getFPFromStorage","returnExpired","itemStr","item","expiry","ensureFingerprintIds","fpKey","sessionId","substring","endpointUrl","pathname","patterUrl","agentP","endpoint","defaultEndpoint","defaultScriptUrlPattern","agent","requestId","linkedId","fpData","createFingerprintObject","setFPToStorage","ex","FLOW_NONCE_PREFIX","FLOW_NONCE_HEADER","FLOW_START_PATH","FLOW_NEXT_PATH","getNonceKeyForExecution","removeFlowNonce","extractExecId","exec","getExecutionIdFromRequest","req","LOCAL_STORAGE_LAST_USER_LOGIN_ID","LOCAL_STORAGE_LAST_USER_DISPLAY_NAME","getLastUserLoginId","getLastUserDisplayName","startWrapper","fn","displayName","lastAuth","logoutWrapper","keepOnLogout","resp","createPubSub","cbs","pub","cb","sub","idx","splice","wrapper","createOptions","publicKey","challenge","decodeBase64Url","id","excludeCredentials","decodeCreateOptions","createResponse","navigator","credential","rawId","encodeBase64Url","type","attestationObject","clientDataJSON","getOptions","decodeGetOptions","encodeGetResponse","conditional","abort","signal","mediation","isSupported","requirePlatformAuthenticator","supported","PublicKeyCredential","isUserVerifyingPlatformAuthenticatorAvailable","allowCredentials","authenticatorData","signature","userHandle","base64","Uint8Array","buffer","btoa","fromCharCode","creator","createWebAuthn$1","sdk","identifier","startResponse","getResponse","helpers","obj","apiPaths","generateNonce","crypto","getRandomValues","array","byte","performOneTap","performOneTapAsync","onFailed","auth","oneTapConfig","onSkipped","onDismissed","googleClient","accounts","googleScript","getElementById","defer","getGoogleClient","clientIdRes","clientId","callback","initialize","itp_support","use_fedcm_for_prompt","_b","client_id","prompt","notification","isDismissedMoment","getDismissedReason","isSkippedMoment","getSkippedReason","startOneTap","onCodeReceived","onAuthenticated","withFlow","coreSdk","webAuthnSupport","decoratedOptions","deviceInfo","startOptionsVersion","scriptLoadingPromise","loadScriptWithFallback","urls","getEntry","entry","scriptEle","hash","abs","simpleHash","setAttribute","getOidcClient","oidcConfig","require","loadOIDCModule","OidcClient","WebStorageStateStore","redirectUri","scope","stateUserKey","authority","applicationId","settings","redirect_uri","response_type","stateStore","store","loadUserInfo","fetchRequestCredentials","client","createOidc","getCachedClient","finishLogin","processSigninResponse","signInRes","Response","session_state","profile","currentUrl","searchParams","replaceState","removeOidcParamFromUrl","loginWithRedirect","arg","disableNavigation","createSigninRequest","finishLoginIfNeed","search","refreshToken","getUserFromStorage","useRefreshToken","id_token_hint","post_logout_redirect_uri","createSignoutRequest","decoratedCreateSdk","elem","compose","createSdk","fpLoad","autoRefresh","clearAllTimers","setTimer","timerIds","pop","createTimerFunctions","sessionExpirationDate","_req","claims","getTokenExpiration","refreshTimeStr","toLocaleTimeString","hour12","wrapWith","sessionExpirationPS","sessionPS","userPS","userDetails","wrappedSdk","onSessionTokenChange","onUserChange","onIsAuthenticatedChange","enableFlowNonce","nonceStoragePrefix","sdkConfig","startsWith","parseError","cleanupExpiredNonces","extractFlowNonce","isStart","ttlSeconds","setFlowNonce","getFlowNonce","storeLastAuthenticatedUser","keepLastAuthenticatedUserAfterLogout","loginIds","setLastUserLoginId","setLastUserDisplayName","persistTokens","isPersistTokens","sessionTokenViaCookie","storagePrefix","isManagementApi","createCoreSdk","oidc","currentSessionToken","currentRefreshToken","getExternalToken","dcs","dcr","createWebAuthn","fedcm","onetap","requestExchangeCode","requestAuthentication","launch","context","identity","providers","configURL","isLoggedIn"],"mappings":"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","x_google_ignoreList":[0,1,7,11]}